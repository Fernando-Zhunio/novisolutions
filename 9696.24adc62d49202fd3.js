"use strict";(self.webpackChunkng=self.webpackChunkng||[]).push([[9696],{9696:(Q,_,r)=>{r.r(_),r.d(_,{PermissionsModule:()=>q});var d=r(69808),c=r(59516),v=r(27761),s=r(93075),p=r(67399),e=r(5e3),g=r(8735),f=r(67322),h=r(47423),Z=r(74107),E=r(90508),x=r(77531),C=r(69832);function y(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"mat-button-toggle-group",5),e.NdJ("change",function(o){e.CHM(t);const m=e.oxw();return e.KtG(m.changeForm(o))}),e.TgZ(1,"mat-button-toggle",6),e._uU(2,"Crud"),e.qZA(),e.TgZ(3,"mat-button-toggle",7),e._uU(4,"Normal"),e.qZA()()}}function N(i,a){if(1&i&&(e.TgZ(0,"mat-option",19),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function w(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"div",8)(2,"mat-form-field",9),e._UZ(3,"input",10),e.TgZ(4,"mat-hint"),e._uU(5,"Ejemplo: product-admin.vtex.product-vtex."),e.qZA()(),e.TgZ(6,"mat-form-field",9),e._UZ(7,"input",11),e.TgZ(8,"mat-hint"),e._uU(9,"Ejemplo: Precio [Precio de producto]"),e.qZA()(),e.TgZ(10,"mat-form-field",9),e._UZ(11,"input",12),e.TgZ(12,"mat-hint"),e._uU(13,"Ejemplo: Precios [Precios de productos]"),e.qZA()(),e.TgZ(14,"mat-form-field",9),e._UZ(15,"input",13),e.qZA(),e.TgZ(16,"mat-form-field",9),e._UZ(17,"input",14),e.TgZ(18,"mat-hint"),e._uU(19,"Ejemplo: un, una"),e.qZA()(),e.TgZ(20,"mat-form-field",9)(21,"mat-select",15),e.YNc(22,N,2,2,"mat-option",16),e.qZA()(),e.TgZ(23,"div")(24,"button",17),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.saveInServer())}),e._uU(25,"Guardar"),e.qZA(),e.TgZ(26,"button",18),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.close())}),e._uU(27,"Cerrar"),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.formCrud),e.xp6(21),e.Q6J("ngForOf",t.groupsPermissions),e.xp6(2),e.Q6J("disabled",t.isLoading)}}function A(i,a){if(1&i&&(e.TgZ(0,"mat-option",19),e._uU(1),e.qZA()),2&i){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function k(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"div",8)(2,"mat-form-field",9),e._UZ(3,"input",10),e.qZA(),e.TgZ(4,"mat-form-field",9),e._UZ(5,"input",20),e.qZA(),e.TgZ(6,"mat-form-field",9),e._UZ(7,"input",21),e.qZA(),e.TgZ(8,"mat-form-field",9),e._UZ(9,"input",13),e.qZA(),e.TgZ(10,"mat-form-field",9)(11,"mat-select",15),e.YNc(12,A,2,2,"mat-option",16),e.qZA()(),e.TgZ(13,"div",22)(14,"button",23),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.saveInServer())}),e._uU(15,"Guardar"),e.qZA(),e.TgZ(16,"button",18),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.close())}),e._uU(17,"Cerrar"),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("formGroup",t.form),e.xp6(11),e.Q6J("ngForOf",t.groupsPermissions),e.xp6(2),e.Q6J("disabled",t.isLoading)}}let O=(()=>{class i{constructor(t,n,o){this.s_standard=t,this.data=n,this.sheet=o,this.isLoading=!1,this.currentForm="crud",this.groupsPermissions=[],this.form=new s.cw({group_permission_id:new s.NI(null),name:new s.NI(null,[s.kI.required]),title:new s.NI(null,[s.kI.required]),description:new s.NI(null,[s.kI.required]),guard_name:new s.NI(null)}),this.formCrud=new s.cw({name:new s.NI(null,[s.kI.required]),singular_name:new s.NI(null,[s.kI.required]),plural_name:new s.NI(null,[s.kI.required]),article:new s.NI(null,[s.kI.required]),guard_name:new s.NI(null,[s.kI.required]),group_permission_id:new s.NI(null,[s.kI.required])}),this.isLoading=!0,n.isEdit?this.s_standard.index(`admin/permissions/${n.id}/edit`).subscribe(l=>{this.form.patchValue(l.data.permission),this.groupsPermissions=l.data.groupsPermissions,console.log(l),this.isLoading=!1},l=>{console.log(l)}):this.s_standard.index("admin/permissions/create").subscribe(l=>{this.groupsPermissions=l.data,console.log(l),this.isLoading=!1},l=>{console.log(l)})}saveInServer(){"crud"===this.currentForm?this.formCrud.valid&&(this.isLoading=!0,!this.data.isEdit)&&this.s_standard.store("admin/permissions",Object.assign({isCrud:!0},this.formCrud.value)).subscribe(n=>{this.sheet.dismiss(n.data)}):this.form.valid&&(this.isLoading=!0,this.data.isEdit?this.s_standard.updatePut(`admin/permissions/${this.data.id}`,this.form.value).subscribe(n=>{console.log(n),this.sheet.dismiss(n.data)}):this.s_standard.store("admin/permissions",this.form.value).subscribe(n=>{this.sheet.dismiss(n.data)}))}close(){this.sheet.dismiss()}changeForm(t){this.currentForm=t.value}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.X),e.Y36(p.OG),e.Y36(p.oL))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-create-or-edit-permission"]],decls:7,vars:4,consts:[[1,"font-weight-bold","font-3xl"],["value","crud",3,"change",4,"ngIf"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["value","crud",3,"change"],["value","crud"],["selected","","value","normal"],[1,"row","m-0",3,"formGroup"],[1,"col-md-6","col-12"],["formControlName","name","matInput","","placeholder","Nombre"],["formControlName","singular_name","matInput","","placeholder","Nombre singular"],["formControlName","plural_name","matInput","","placeholder","Nombre plural"],["formControlName","guard_name","matInput","","placeholder","Nombre Guard"],["formControlName","article","matInput","","placeholder","Articulo"],["formControlName","group_permission_id","placeholder","Seleccione un grupo"],[3,"value",4,"ngFor","ngForOf"],["mat-raised-button","",3,"disabled","click"],["mat-raised-button","","color","warn",1,"ml-1",3,"click"],[3,"value"],["formControlName","title","matInput","","placeholder","Titulo"],["formControlName","description","matInput","","placeholder","Descripci\xf3n"],[1,"col-12"],["mat-raised-button","","color","primary",3,"disabled","click"]],template:function(t,n){1&t&&(e.TgZ(0,"div")(1,"h2",0),e._uU(2),e.qZA(),e.YNc(3,y,5,0,"mat-button-toggle-group",1),e.TgZ(4,"div",2),e.YNc(5,w,28,3,"div",3),e.YNc(6,k,18,3,"div",4),e.qZA()()),2&t&&(e.xp6(2),e.hij("Formulario de permisos - ",n.data.isEdit?"EDITANDO":"CREANDO",""),e.xp6(1),e.Q6J("ngIf",!n.data.isEdit),e.xp6(1),e.Q6J("ngSwitch",n.currentForm),e.xp6(1),e.Q6J("ngSwitchCase","crud"))},dependencies:[d.sg,d.O5,d.RF,d.n9,d.ED,s.Fj,s.JJ,s.JL,s.sg,s.u,f.KE,f.bx,h.lW,Z.gD,E.ey,x.Nt,C.A9,C.Yi],styles:[".mat-button-toggle-group[_ngcontent-%COMP%]{height:32px;align-items:center}"]}),i})();var b=r(57261),T=r(39221),u=r(48966);let U=(()=>{class i extends v.Y{constructor(t,n,o){super(t,n,o),this._standard=t,this._snack=n,this.router=o,this.url="admin/groups-permissions",this.displayedColumns=["id","name","slug","position","actions"],this.permissions={create:["super-admin","admin.permissions.create"],edit:["super-admin","admin.permissions.edit"],destroy:["super-admin","admin.permissions.destroy"]},this.itemRows=[{key:"id",title:"Id",isEditable:!1},{key:"name",title:"Nombre",isEditable:!0},{key:"slug",title:"Slug",isEditable:!0},{key:"position",title:"Posici\xf3n",isEditable:!0},{key:"acciones",title:"Acciones",isEditable:!1}]}ngOnInit(){}creating(){const t=document.getElementsByClassName("mat-dialog-content")[0];t.scrollTop=t.scrollHeight}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.X),e.Y36(b.ux),e.Y36(c.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-groups-permissions-index"]],features:[e.qOj],decls:6,vars:4,consts:[["mat-dialog-content",""],["title","Grupo de permisos",3,"url","isEditable","displayedColumns","itemRows","onClickCreate","onClickDestroy"],["mat-dialog-actions",""],["color","warn","mat-raised-button","","mat-dialog-close","","cdkFocusInitial",""]],template:function(t,n){1&t&&(e.TgZ(0,"div")(1,"div",0)(2,"app-index-with-mat-table",1),e.NdJ("onClickCreate",function(){return n.creating()})("onClickDestroy",function(m){return n.deleteItem(m)}),e.qZA()(),e.TgZ(3,"div",2)(4,"button",3),e._uU(5,"Cerrar"),e.qZA()()()),2&t&&(e.xp6(2),e.Q6J("url",n.url)("isEditable",!0)("displayedColumns",n.displayedColumns)("itemRows",n.itemRows))},dependencies:[T.Z,u.ZT,u.xY,u.H8,h.lW]}),i})();var I=r(25245),P=r(26688);const G=[{path:"",component:(()=>{class i extends v.Y{constructor(t,n,o,m,l){super(n,o,m),this.dialog=t,this.router=m,this.btnSheet=l,this.url="admin/permissions",this.displayedColumns=["id","title","description","group_permission.name","created_at","actions"],this.permissions={create:["super-admin","admin.permissions.create"],edit:["super-admin","admin.permissions.edit"],destroy:["super-admin","admin.permissions.destroy"]},this.itemRows=[{key:"id",title:"Id",isEditable:!1},{key:"title",title:"Titulo",isEditable:!1},{key:"description",title:"Descripci\xf3n",isEditable:!1},{key:"group_permission.name",title:"Grupo",isEditable:!1},{key:"created_at",title:"Creado",isEditable:!1}]}ngOnInit(){}openCreateOrEdit(t,n=!1){console.log(t),this.btnSheet.open(O,{data:{id:t,isEdit:n}}).afterDismissed().subscribe(o=>{console.log(o),o&&this.indexWithMatTableComponent.changePaginator()})}openDialogGroupPermission(){this.dialog.open(U).afterClosed().subscribe(()=>{})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(u.uw),e.Y36(g.X),e.Y36(b.ux),e.Y36(c.F0),e.Y36(p.ch))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-permission-index"]],features:[e.qOj],decls:7,vars:3,consts:[["icon","admin_panel_settings","title","Permisos","textBtnAdd","Agregar permiso",3,"url","itemRows","displayedColumns","onClickDestroy","onClickCreate","onClickEdit"],["matTable",""],["buttonsHeader",""],[1,"mat-btn-add","ml-1",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"app-index-with-mat-table",0,1),e.NdJ("onClickDestroy",function(m){return n.deleteItem(m)})("onClickCreate",function(m){return n.openCreateOrEdit(m)})("onClickEdit",function(m){return n.openCreateOrEdit(m,!0)}),e.ynx(2,2),e.TgZ(3,"mat-chip",3),e.NdJ("click",function(){return n.openDialogGroupPermission()}),e.TgZ(4,"mat-icon"),e._uU(5,"account_tree"),e.qZA(),e._uU(6,"\xa0Agregar grupo"),e.qZA(),e.BQk(),e.qZA()),2&t&&e.Q6J("url",n.url)("itemRows",n.itemRows)("displayedColumns",n.displayedColumns)},dependencies:[T.Z,I.Hw,P.HS],styles:[".btn-add-group[_ngcontent-%COMP%]{position:fixed;bottom:80px;right:10px}"]}),i})(),data:{permissions:{only:["super-admin","admin.permissions.index"]}},canActivate:[r(4721).DD]}];let D=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[c.Bz.forChild(G),c.Bz]}),i})();var Y=r(87445),M=r(14623),S=r(77446);let q=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[D,d.ez,Y.U,u.Is,p._r,M.ie,s.UX,f.lN,h.ot,I.Ps,Z.LD,x.c,P.Hi,S.p9,C.vV]}),i})()}}]);