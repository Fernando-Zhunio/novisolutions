"use strict";(self.webpackChunkng=self.webpackChunkng||[]).push([[1706],{21706:(it,x,s)=>{s.r(x),s.d(x,{WorksModule:()=>et});var c=s(69808),m=s(59516),g=s(4721),a=s(93075),t=s(5e3),Z=s(8735),f=s(25245),u=s(67322),v=s(77531),k=s(74107),T=s(90508),C=s(47423),p=s(86856),h=s(9224);function b(o,r){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Este campo es requerido"),t.qZA())}function J(o,r){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Este campo es requerido"),t.qZA())}function w(o,r){if(1&o&&(t.TgZ(0,"mat-option",16),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij("",e.name," ")}}function O(o,r){if(1&o&&(t.TgZ(0,"mat-option",16),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.Q6J("value",e.id),t.xp6(1),t.Oqu(e.name)}}function y(o,r){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",31)(2,"mat-label"),t._uU(3),t.qZA(),t._UZ(4,"input",32),t.TgZ(5,"button",33),t.NdJ("click",function(){const d=t.CHM(e).index,l=t.oxw();return t.KtG(l.removeFormSkill(d))}),t.TgZ(6,"mat-icon"),t._uU(7,"delete"),t.qZA()()(),t.BQk()}if(2&o){const e=r.$implicit,i=r.index;t.xp6(3),t.hij("Ofrecimiento ",i,""),t.xp6(1),t.Q6J("formControl",e)}}function F(o,r){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",5)(2,"mat-label"),t._uU(3),t.qZA(),t._UZ(4,"input",34),t.TgZ(5,"button",33),t.NdJ("click",function(){const d=t.CHM(e).index,l=t.oxw();return t.KtG(l.removeFormRequeriement(d))}),t.TgZ(6,"mat-icon"),t._uU(7,"delete"),t.qZA()()(),t.BQk()}if(2&o){const e=r.$implicit,i=r.index;t.xp6(3),t.hij("Requerimiento ",i,""),t.xp6(1),t.Q6J("formControl",e)}}let q=(()=>{class o{constructor(e,i,n){this.actived_router=e,this.s_standart=i,this.router=n,this.formWork=new a.cw({title:new a.NI(null,[a.kI.required]),description:new a.NI(null,[a.kI.required]),skills:new a.Oe([]),requiments:new a.Oe([]),time:new a.NI(null,[a.kI.required]),expiration_date:new a.NI(null),department_position_id:new a.NI(null,[a.kI.required]),city_id:new a.NI(null,[a.kI.required]),salary:new a.NI(null)}),this.state="create",this.title="Creando Empleo",this.cities=[],this.departments_position=[],this.isLoading=!1}ngOnInit(){this.isLoading=!0,this.actived_router.data.subscribe(e=>{if(this.state=e.isEdit?"edit":"create",e.isEdit){this.title="Editando Empleo";const n=`rrhh/works/${Number.parseInt(this.actived_router.snapshot.paramMap.get("id")||"0")||0}`;this.s_standart.methodGet(n).subscribe({next:d=>{null!=d&&d.success&&(this.departments_position=d.data.departments_position,this.cities=d.data.cities,this.work=d.data.work,this.loadDataUpdate(this.work)),this.isLoading=!1},error:d=>{console.log(d),this.isLoading=!1}})}else this.title="Creando Empleo",this.s_standart.methodGet("rrhh/works/create").subscribe({next:n=>{null!=n&&n.success&&(this.departments_position=n.data.departments_position,this.cities=n.data.cities),this.isLoading=!1},error:n=>{console.log(n),this.isLoading=!1}})})}get requimentsForm(){return this.formWork.controls.requiments}get skillsForm(){return this.formWork.controls.skills}loadDataUpdate(e){this.formWork.patchValue({title:e.title,description:e.description,skills:[],requiments:[],time:e.time.toString(),expiration_date:e.expiration_date,department_position_id:e.department_position_id,city_id:e.city_id}),e.skills.forEach(i=>{this.addSkill(i)}),e.requiments.forEach(i=>{this.addRequirement(i)})}addRequirement(e=null){const i=new a.NI(e);this.requimentsForm.push(i)}removeFormRequeriement(e){this.requimentsForm.removeAt(e)}addSkill(e=null){const i=new a.NI(e);this.skillsForm.push(i)}removeFormSkill(e){this.skillsForm.removeAt(e)}onSubmit(){}saveOrEditInServer(){this.formWork.valid&&("create"===this.state?(this.isLoading=!0,this.s_standart.methodPost("rrhh/works",this.formWork.value).subscribe({next:i=>{null!=i&&i.success&&this.router.navigate(["/rrhh/works"]),this.isLoading=!1},error:i=>{console.log(i),this.isLoading=!1}})):"edit"==this.state&&(this.isLoading=!0,this.s_standart.methodPut(`rrhh/works/${this.work.id}`,this.formWork.value).subscribe({next:i=>{null!=i&&i.success&&this.router.navigate(["/rrhh/works"]),this.isLoading=!1}})))}goSearchWorkBack(e){this.router.navigate(["recursos-humanos/works"],{queryParams:{search:e}})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(m.gz),t.Y36(Z.X),t.Y36(m.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-create-or-edit-work"]],decls:76,vars:15,consts:[[1,"pb-3"],[1,"font-5xl","mt-3","font-weight-bold"],[1,"card-body",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-10","col-12"],[1,"w-100"],["matInput","","placeholder","Ingrese su titulo","formControlName","title","required",""],[4,"ngIf"],[1,"col-md-2","col-12"],["matInput","","type","number","placeholder","Ingrese el salario","formControlName","salary"],["matPrefix",""],["matSuffix",""],[1,"col-12"],["matInput","","placeholder","Ingrese la descripci\xf3n","formControlName","description","required",""],[1,"col-md-3","col-12"],["formControlName","time"],[3,"value"],["formControlName","expiration_date","matInput","",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],["formControlName","department_position_id"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-3","col-12","d-flex"],["formControlName","city_id"],[1,"col-12","border","p-3","my-3","rounded-fz"],[1,"my-2","font-2xl"],["formArrayName","skills"],[4,"ngFor","ngForOf"],["type","button","mat-raised-button","",1,"my-1",3,"click"],["formArrayName","requiments"],["color","primary","type","submit","mat-raised-button","",3,"disabled"],["appearance","fill",1,"w-100"],["matInput","","placeholder","Ingrese un ofrecimiento","required","",3,"formControl"],["type","button","mat-icon-button","","matSuffix","",3,"click"],["matInput","","placeholder","Ingrese el requerimiento","required","",3,"formControl"]],template:function(e,i){if(1&e&&(t.TgZ(0,"div",0)(1,"h3",1),t._uU(2),t.qZA(),t.TgZ(3,"mat-card")(4,"form",2),t.NdJ("ngSubmit",function(){return i.saveOrEditInServer()}),t.TgZ(5,"div",3)(6,"div",4)(7,"mat-form-field",5)(8,"mat-label"),t._uU(9,"Titulo"),t.qZA(),t._UZ(10,"input",6),t.YNc(11,b,2,0,"mat-error",7),t.qZA()(),t.TgZ(12,"div",8)(13,"mat-form-field",5)(14,"mat-label"),t._uU(15,"Salario"),t.qZA(),t._UZ(16,"input",9),t.TgZ(17,"span",10),t._uU(18,"$\xa0"),t.qZA(),t.TgZ(19,"span",11),t._uU(20,".00"),t.qZA()()(),t.TgZ(21,"div",12)(22,"mat-form-field",5)(23,"mat-label"),t._uU(24,"Descripci\xf3n"),t.qZA(),t._UZ(25,"textarea",13),t.YNc(26,J,2,0,"mat-error",7),t.qZA()(),t.TgZ(27,"div",14)(28,"mat-form-field",5)(29,"mat-label"),t._uU(30,"Tiempo"),t.qZA(),t.TgZ(31,"mat-select",15)(32,"mat-option",16),t._uU(33,"Tiempo completo"),t.qZA(),t.TgZ(34,"mat-option",16),t._uU(35,"medio Tiempo"),t.qZA(),t.TgZ(36,"mat-option",16),t._uU(37,"Freelance"),t.qZA(),t.TgZ(38,"mat-option",16),t._uU(39,"Temporal"),t.qZA()()()(),t.TgZ(40,"div",14)(41,"mat-form-field",5)(42,"mat-label"),t._uU(43,"Fecha de Expiraci\xf3n"),t.qZA(),t._UZ(44,"input",17)(45,"mat-datepicker-toggle",18)(46,"mat-datepicker",null,19),t.qZA()(),t.TgZ(48,"div",14)(49,"mat-form-field",5)(50,"mat-label"),t._uU(51,"Departamento"),t.qZA(),t.TgZ(52,"mat-select",20),t.YNc(53,w,2,2,"mat-option",21),t.qZA()()(),t.TgZ(54,"div",22)(55,"mat-form-field",5)(56,"mat-label"),t._uU(57,"Ciudad"),t.qZA(),t.TgZ(58,"mat-select",23),t.YNc(59,O,2,2,"mat-option",21),t.qZA()()(),t.TgZ(60,"div",24)(61,"div",25),t._uU(62,"Ofrecimientos"),t.qZA(),t.ynx(63,26),t.YNc(64,y,8,2,"ng-container",27),t.TgZ(65,"button",28),t.NdJ("click",function(){return i.addSkill()}),t._uU(66,"Agregar ofrecimiento"),t.qZA(),t.BQk(),t.qZA(),t.TgZ(67,"div",24)(68,"div",25),t._uU(69,"Requerimientos"),t.qZA(),t.ynx(70,29),t.YNc(71,F,8,2,"ng-container",27),t.TgZ(72,"button",28),t.NdJ("click",function(){return i.addRequirement()}),t._uU(73,"Agregar requerimiento"),t.qZA(),t.BQk(),t.qZA()(),t.TgZ(74,"button",30),t._uU(75,"Guardar"),t.qZA()()()()),2&e){const n=t.MAs(47);t.xp6(2),t.Oqu(i.title),t.xp6(2),t.Q6J("formGroup",i.formWork),t.xp6(7),t.Q6J("ngIf",i.formWork.get("title").invalid),t.xp6(15),t.Q6J("ngIf",i.formWork.get("description").invalid),t.xp6(6),t.Q6J("value","full_time"),t.xp6(2),t.Q6J("value","part_time"),t.xp6(2),t.Q6J("value","freelance"),t.xp6(2),t.Q6J("value","temporary"),t.xp6(6),t.Q6J("matDatepicker",n),t.xp6(1),t.Q6J("for",n),t.xp6(8),t.Q6J("ngForOf",i.departments_position),t.xp6(6),t.Q6J("ngForOf",i.cities),t.xp6(5),t.Q6J("ngForOf",i.skillsForm.controls),t.xp6(7),t.Q6J("ngForOf",i.requimentsForm.controls),t.xp6(3),t.Q6J("disabled",i.isLoading)}},dependencies:[c.sg,c.O5,f.Hw,a._Y,a.Fj,a.wV,a.JJ,a.JL,a.Q7,a.oH,a.sg,a.u,a.CE,u.TO,u.KE,u.hX,u.qo,u.R9,v.Nt,k.gD,T.ey,C.lW,p.Mq,p.hl,p.nW,h.a8]}),o})();var N=s(65291),Q=s(29724),E=s(43720),A=s(72349),_=s(26688),I=s(84909),U=s(86087);const W=function(){return{"border-radius":"20px",height:"200px"}},L=function(){return{"border-radius":"5px",height:"35px",width:"150px","margin-right":"5px"}},S=function(){return{"border-radius":"5px",height:"25px",width:"150px","margin-right":"5px"}};function M(o,r){1&o&&(t.TgZ(0,"div",9),t._UZ(1,"ngx-skeleton-loader",10),t.TgZ(2,"div",11),t._UZ(3,"ngx-skeleton-loader",12),t.qZA(),t._UZ(4,"ngx-skeleton-loader",10)(5,"ngx-skeleton-loader",10),t.qZA()),2&o&&(t.xp6(1),t.Q6J("theme",t.DdM(3,W)),t.xp6(3),t.Q6J("theme",t.DdM(4,L)),t.xp6(1),t.Q6J("theme",t.DdM(5,S)))}const D=function(){return[1,2,3]};function Y(o,r){1&o&&(t.TgZ(0,"mat-card",7),t.YNc(1,M,6,6,"div",8),t.qZA()),2&o&&(t.xp6(1),t.Q6J("ngForOf",t.DdM(1,D)))}function R(o,r){1&o&&t._UZ(0,"div",25)}const z=function(o){return["./edit",o]};function B(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"mat-card",14),t.YNc(1,R,1,0,"div",15),t.TgZ(2,"div",16)(3,"div",17)(4,"div",18),t._uU(5),t.qZA(),t.TgZ(6,"p",19),t._uU(7),t.qZA(),t.TgZ(8,"mat-chip-list",1)(9,"mat-chip",20),t._uU(10),t.qZA(),t.TgZ(11,"mat-chip"),t._uU(12),t.ALo(13,"date"),t.qZA(),t.TgZ(14,"mat-chip",21),t.NdJ("click",function(){const d=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.deleteWork(d.id))}),t.TgZ(15,"mat-icon"),t._uU(16,"delete"),t.qZA()(),t.TgZ(17,"mat-chip",22)(18,"mat-icon"),t._uU(19,"edit"),t.qZA()(),t.TgZ(20,"mat-chip",23),t._uU(21," Total de solicitudes: "),t.TgZ(22,"span",24),t._uU(23),t.qZA()()()()()()}if(2&o){const e=r.$implicit;t.Q6J("@fade",void 0),t.xp6(1),t.Q6J("ngIf",null==e?null:e.isLoading),t.xp6(4),t.Oqu(e.title),t.xp6(2),t.Oqu(e.description),t.xp6(2),t.Q6J("color","work_available"===e.current_status.type_action?"accent":"warn"),t.xp6(1),t.hij(" ",e.current_status.name," "),t.xp6(2),t.hij(" ",t.lcZ(13,9,e.status_last.created_at)," "),t.xp6(5),t.Q6J("routerLink",t.VKq(11,z,e.id)),t.xp6(6),t.hij(" ",e.requests_count,"")}}function H(o,r){if(1&o&&(t.TgZ(0,"div",7),t.YNc(1,B,24,13,"mat-card",13),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.products)}}function j(o,r){1&o&&(t.ynx(0),t.TgZ(1,"div",26)(2,"div",27),t._UZ(3,"img",28),t.qZA(),t.TgZ(4,"div",29),t._uU(5," Ups! Sin resultados en tu b\xfasqueda "),t.qZA()(),t.BQk())}const G=function(){return[10,20,30]};function $(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"mat-paginator",30),t.NdJ("page",function(n){t.CHM(e);const d=t.oxw();return t.KtG(d.changePaginator(n))}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("hidden",e.isLoading)("pageSizeOptions",t.DdM(5,G))("pageSize",e.paginator.per_page)("length",e.paginator.total)("pageIndex",e.paginator.current_page-1)}}const P=function(){return{}},K=function(){return["./create"]},X=[{path:"",children:[{path:"",component:(()=>{class o extends N.j{constructor(e){super(),this.s_serviceStandart=e,this.url="rrhh/works"}ngOnInit(){}deleteWork(e){const i=this.products.find(n=>n.id===e);i&&Q.J.swalConfirmation("Eliminaci\xf3n Empleo","\xbfEst\xe1 seguro de eliminar este Empleo?","question","Si, eliminar","No, cancelar").then(n=>{n.isConfirmed&&(i.isLoading=!0,this.s_serviceStandart.destory(`rrhh/works/${i.id}`).subscribe(d=>{if(i.isLoading=!1,d&&d.hasOwnProperty("success")&&d.success){const l=this.products.findIndex(ot=>ot.id==e);this.products.splice(l,1)}},()=>{i.isLoading=!1}))})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(Z.X))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-index"]],viewQuery:function(e,i){if(1&e&&t.Gf(A.H,5),2&e){let n;t.iGM(n=t.CRH())&&(i.headerComponent=n.first)}},features:[t.qOj],decls:10,vars:11,consts:[[3,"title","filter_data","placeholder","url","isLoading","products"],[1,"ml-1"],[1,"text-truncate",3,"routerLink"],["type","search",1,"text-black-50"],["class","mt-4 card-columns",4,"ngIf"],[4,"ngIf"],["showFirstLastButtons","",3,"hidden","pageSizeOptions","pageSize","length","pageIndex","page",4,"ngIf"],[1,"mt-4","card-columns"],["class","card border-0 rounded-fz text-center",4,"ngFor","ngForOf"],[1,"card","border-0","rounded-fz","text-center"],["count","1",3,"theme"],[1,"text-center"],["appearance","circle","count","1"],["class","card border-0 overflow-hidden position-relative",4,"ngFor","ngForOf"],[1,"card","border-0","overflow-hidden","position-relative"],["class","position-absolute w-100 h-100 opaque-blur",4,"ngIf"],[1,"card-body"],[1,"header-request"],[1,"font-weight-bold","h3"],[1,"lead"],["selected","",3,"color"],["selected","","color","warn",3,"click"],["selected","",3,"routerLink"],["selected",""],[1,"badge","font-xs","bg-vine","ml-2"],[1,"position-absolute","w-100","h-100","opaque-blur"],[1,"row"],[1,"col-md-6"],["src","/assets/img/respuesta_vacia.svg","alt","","width","100%"],[1,"col-md-6","font-2xl","d-flex","align-items-center"],["showFirstLastButtons","",3,"hidden","pageSizeOptions","pageSize","length","pageIndex","page"]],template:function(e,i){1&e&&(t.TgZ(0,"div")(1,"app-header-search",0),t.NdJ("isLoading",function(d){return i.isLoading=d})("products",function(d){return i.loadData(d)}),t.TgZ(2,"mat-chip-list",1)(3,"mat-chip",2)(4,"mat-icon",3),t._uU(5,"add"),t.qZA()()()(),t.YNc(6,Y,2,2,"mat-card",4),t.YNc(7,H,2,1,"div",4),t.YNc(8,j,6,0,"ng-container",5),t.YNc(9,$,1,6,"mat-paginator",6),t.qZA()),2&e&&(t.xp6(1),t.Q6J("title","Empleos")("filter_data",t.DdM(9,P))("placeholder","Buscador de empleos")("url",i.url),t.xp6(2),t.Q6J("routerLink",t.DdM(10,K)),t.xp6(3),t.Q6J("ngIf",i.isLoading),t.xp6(1),t.Q6J("ngIf",!i.isLoading),t.xp6(1),t.Q6J("ngIf",!i.isLoading&&(null==i.products?null:i.products.length)<1),t.xp6(1),t.Q6J("ngIf",(null==i.products?null:i.products.length)>0))},dependencies:[c.sg,c.O5,m.rH,f.Hw,A.H,_.qn,_.HS,I.xr,U.NW,h.a8,c.uU],styles:[".work_available[_ngcontent-%COMP%]{background-color:#adff2f}.work_expired[_ngcontent-%COMP%]{background-color:red;color:#fff}"],data:{animation:E.A}}),o})(),data:{permissions:{only:["super-admin","rrhh-works"]}},canActivate:[g.DD]},{path:"edit/:id",component:q,data:{isEdit:!0,permissions:{only:["super-admin","rrhh-works"]}},canActivate:[g.DD]},{path:"create",component:q,data:{isEdit:!1,permissions:{only:["super-admin","rrhh-works"]}},canActivate:[g.DD]}]}];let V=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[m.Bz.forChild(X),m.Bz]}),o})();var tt=s(9178);let et=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[c.ez,V,m.Bz,f.Ps,tt.q,_.Hi,I.hx,U.TU,a.UX,u.lN,v.c,k.LD,C.ot,p.FA,T.XK,h.QW]}),o})()}}]);