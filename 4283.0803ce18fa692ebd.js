"use strict";(self.webpackChunkng=self.webpackChunkng||[]).push([[4283],{14283:(H,g,o)=>{o.r(g),o.d(g,{WorkspacesOrdersModule:()=>S});var c=o(69808),Z=o(75401),u=o(59516),i=o(93075),O=o(67376),e=o(5e3),v=o(95625),x=o(29055),_=o(47423),d=o(25245),f=o(67322),p=o(9224),h=o(77531);function C(r,s){if(1&r&&(e.TgZ(0,"div",29)(1,"mat-icon"),e._uU(2,"email"),e.qZA(),e._uU(3),e.qZA()),2&r){const t=e.oxw().$implicit;e.xp6(3),e.Oqu(null==t.value?null:t.value.email)}}function T(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"button",30),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,l=e.oxw();return e.KtG(l.selectedPerson(a.key))}),e._uU(1," seleccionar "),e.TgZ(2,"mat-icon"),e._uU(3,"done"),e.qZA()()}}function A(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"button",31),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,l=e.oxw();return e.KtG(l.unselectedPerson(a.key))}),e._uU(1," Quitar "),e.TgZ(2,"mat-icon"),e._uU(3,"close"),e.qZA()()}}function y(r,s){if(1&r&&(e.TgZ(0,"div",22)(1,"div",23)(2,"span",24),e._UZ(3,"img",25),e.qZA(),e.TgZ(4,"div")(5,"div"),e._uU(6),e.qZA(),e.YNc(7,C,4,1,"div",26),e.qZA()(),e.YNc(8,T,4,0,"button",27),e.YNc(9,A,4,0,"ng-template",null,28,e.W1O),e.qZA()),2&r){const t=s.$implicit,n=e.MAs(10),a=e.oxw();e.xp6(3),e.Q6J("src",(null==t.value||null==t.value.person||null==t.value.person.photo?null:t.value.person.photo.permalink)||"https://ui-avatars.com/api/?background=random&name="+(null==t||null==t.value?null:t.value.first_name),e.LSH),e.xp6(3),e.Oqu((null==t.value?null:t.value.name)||(null==t||null==t.value||null==t.value.person?null:t.value.person.first_name)+" "+(null==t||null==t.value||null==t.value.person?null:t.value.person.last_name)),e.xp6(1),e.Q6J("ngIf",null==t||null==t.value?null:t.value.email),e.xp6(1),e.Q6J("ngIf",!a.usersAssigned.has(t.key))("ngIfElse",n)}}function b(r,s){if(1&r&&(e.TgZ(0,"div",29)(1,"mat-icon"),e._uU(2,"email"),e.qZA(),e._uU(3),e.qZA()),2&r){const t=e.oxw().$implicit;e.xp6(3),e.hij(" ",null==t||null==t.value?null:t.value.email,"")}}function U(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"button",33),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,l=e.oxw();return e.KtG(l.selectedPerson(a.key))}),e._uU(1," seleccionar "),e.TgZ(2,"mat-icon"),e._uU(3,"done"),e.qZA()()}}function W(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"button",34),e.NdJ("click",function(){e.CHM(t);const a=e.oxw().$implicit,l=e.oxw();return e.KtG(l.unselectedPerson(a.key))}),e._uU(1," Quitar "),e.TgZ(2,"mat-icon"),e._uU(3,"close"),e.qZA()()}}function E(r,s){if(1&r&&(e.TgZ(0,"div",22)(1,"div",23)(2,"span",24),e._UZ(3,"img",25),e.qZA(),e.TgZ(4,"div")(5,"div"),e._uU(6),e.qZA(),e.YNc(7,b,4,1,"div",26),e.qZA()(),e.YNc(8,U,4,0,"button",32),e.YNc(9,W,4,0,"ng-template",null,28,e.W1O),e.qZA()),2&r){const t=s.$implicit,n=e.MAs(10),a=e.oxw();e.xp6(3),e.Q6J("src",(null==t.value||null==t.value.person||null==t.value.person.photo?null:t.value.person.photo.permalink)||"https://ui-avatars.com/api/?background=random&name="+(null==t||null==t.value||null==t.value.person?null:t.value.person.first_name),e.LSH),e.xp6(3),e.AsE("",null==t||null==t.value||null==t.value.person?null:t.value.person.first_name," ",null==t||null==t.value||null==t.value.person?null:t.value.person.last_name,""),e.xp6(1),e.Q6J("ngIf",null==t||null==t.value?null:t.value.email),e.xp6(1),e.Q6J("ngIf",!a.usersAssigned.has(t.key))("ngIfElse",n)}}let k=(()=>{class r extends O.Q{constructor(t,n,a,l){super(),this.act_router=t,this.methodsHttp=n,this.router=a,this.location=l,this.title="Workspace Orden - ",this.urlSave="system-orders/workspaces",this.urlUserSearch="system-orders/workspaces/user-search",this.form=new i.cw({name:new i.NI(null,i.kI.required),description:new i.NI(null,i.kI.required)}),this.usersAssigned=new Map,this.users=new Map,this.isActiveSearchPeople=!1}ngOnInit(){this.init(!1)}getData(t){this.users=new Map(t.data.map(n=>[null==n?void 0:n.id,n]))}selectedPerson(t){this.usersAssigned.set(t,this.users.get(t))}unselectedPerson(t){this.usersAssigned.delete(t)}getDataForSendServer(){if(this.form.valid){const t=Array.from(this.usersAssigned.keys());return this.form.markAsPending(),Object.assign(Object.assign({},this.form.value),{users:t})}return this.form.markAllAsTouched(),!1}go(t){this.goBack()}setData(t){this.form.patchValue({name:t.info.name,description:t.info.description}),this.usersAssigned=new Map(t.users.map(n=>[n.id,n]))}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(u.gz),e.Y36(v.s),e.Y36(u.F0),e.Y36(c.Ye))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-create-or-edit-workspace-order"]],features:[e.qOj],decls:40,vars:12,consts:[[1,"d-flex","align-items-center","my-3"],["mat-mini-fab","",3,"click"],[1,"m-0","ml-2"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-6","border-right"],[1,"w-100"],["formControlName","name","matInput","","placeholder","Nombre"],["formControlName","description","matInput","","placeholder","Descripci\xf3n"],["type","submit","color","primary","mat-raised-button","",3,"disabled"],[1,"col-md-6"],[1,"d-flex","justify-content-between","align-items-center"],[1,"m-0"],["type","button","color","primary","mat-raised-button","",1,"my-1",3,"click"],[1,"grid-people"],["class","item-person p-2",4,"ngFor","ngForOf"],[1,"search-template","p-md-3",3,"hidden"],["mat-mini-fab","","color","warn",1,"btn-close",3,"click"],[1,"modal-search","col-md-6","col-10"],["placeholder","Buscador de personas",3,"styles","url","data"],["data",""],[1,"grid-people","main-style"],[1,"item-person","p-2"],[1,"list-person","px-2","py-1"],[1,"mr-1"],["alt","usuario",1,"img-person",3,"src"],["class","d-flex align-items-center text-muted",4,"ngIf"],["type","button","color","primary","mat-button","",3,"click",4,"ngIf","ngIfElse"],["templateQuitBtn",""],[1,"d-flex","align-items-center","text-muted"],["type","button","color","primary","mat-button","",3,"click"],["type","button","color","warn","mat-button","",3,"click"],["color","primary","mat-button","",3,"click",4,"ngIf","ngIfElse"],["color","primary","mat-button","",3,"click"],["color","warn","mat-button","",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div")(1,"div",0)(2,"button",1),e.NdJ("click",function(){return n.goBack()}),e.TgZ(3,"mat-icon"),e._uU(4,"arrow_back"),e.qZA()(),e.TgZ(5,"h1",2),e._uU(6),e.qZA()(),e.TgZ(7,"form",3),e.NdJ("ngSubmit",function(){return n.saveInServer()}),e.TgZ(8,"mat-card")(9,"div",4)(10,"div",5)(11,"mat-form-field",6),e._UZ(12,"input",7),e.qZA(),e.TgZ(13,"mat-form-field",6),e._UZ(14,"textarea",8),e.qZA(),e.TgZ(15,"div")(16,"button",9),e._uU(17,"Guardar "),e.TgZ(18,"mat-icon"),e._uU(19,"save"),e.qZA()()()(),e.TgZ(20,"div",10)(21,"div",11)(22,"h2",12),e._uU(23,"Usuarios seleccionados"),e.qZA(),e.TgZ(24,"button",13),e.NdJ("click",function(){return n.isActiveSearchPeople=!0}),e._uU(25,"Buscar usuarios"),e.qZA()(),e.TgZ(26,"div")(27,"div",14),e.YNc(28,y,11,5,"div",15),e.ALo(29,"keyvalue"),e.qZA()()()()()(),e.TgZ(30,"div",16)(31,"button",17),e.NdJ("click",function(){return n.isActiveSearchPeople=!1}),e.TgZ(32,"mat-icon"),e._uU(33,"close"),e.qZA()(),e.TgZ(34,"div",18)(35,"app-search",19),e.NdJ("data",function(l){return n.getData(l)}),e.ynx(36,20),e.TgZ(37,"div",21),e.YNc(38,E,11,6,"div",15),e.ALo(39,"keyvalue"),e.qZA(),e.BQk(),e.qZA()()()()),2&t&&(e.xp6(6),e.Oqu(n.title),e.xp6(1),e.Q6J("formGroup",n.form),e.xp6(9),e.Q6J("disabled",n.isLoading),e.xp6(12),e.Q6J("ngForOf",e.lcZ(29,8,n.usersAssigned)),e.xp6(2),e.Q6J("hidden",!n.isActiveSearchPeople),e.xp6(5),e.Q6J("styles","overflow: auto; height: 100%;padding: 10px")("url",n.urlUserSearch),e.xp6(3),e.Q6J("ngForOf",e.lcZ(39,10,n.users)))},dependencies:[c.sg,c.O5,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,x.g,_.lW,d.Hw,f.KE,p.a8,h.Nt,c.Nd],styles:[".list-person[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:left;width:100%}.search-template[_ngcontent-%COMP%]{position:fixed;z-index:1020;background-color:#0003;-webkit-backdrop-filter:blur(3px);backdrop-filter:blur(3px);display:flex;justify-content:center;height:100%;width:100%;top:0;left:0}.modal-search[_ngcontent-%COMP%]{height:100%;overflow:auto}.item-person[_ngcontent-%COMP%]{box-shadow:0 .5rem 1rem #00000026!important;border-radius:.7rem}.img-person[_ngcontent-%COMP%]{width:50px;aspect-ratio:1/1;border-radius:50%}.grid-people[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));grid-gap:1rem;padding:10px;border-radius:10px 10px 0 0}"]}),r})();var w=o(98078),J=o(57261),q=o(28300),m=o(26688);const N=function(r){return[r,"edit"]};function I(r,s){if(1&r){const t=e.EpF();e.TgZ(0,"mat-card",5)(1,"div")(2,"div",6)(3,"small"),e._uU(4),e.ALo(5,"date"),e.qZA()(),e.TgZ(6,"small",7),e._uU(7,"Nombre:"),e.qZA(),e.TgZ(8,"h3",8),e._uU(9),e.qZA(),e.TgZ(10,"small",7),e._uU(11,"Description:"),e.qZA(),e.TgZ(12,"p",8),e._uU(13),e.qZA(),e.TgZ(14,"mat-chip-list")(15,"mat-chip",9),e._uU(16,"Editar "),e.TgZ(17,"mat-icon"),e._uU(18,"edit"),e.qZA()(),e.TgZ(19,"mat-chip",10),e.NdJ("click",function(){const l=e.CHM(t).$implicit,Y=e.oxw();return e.KtG(Y.deleteData(l.key))}),e._uU(20,"Eliminar "),e.TgZ(21,"mat-icon"),e._uU(22,"delete"),e.qZA()()()()()}if(2&r){const t=s.$implicit;e.xp6(4),e.Oqu(e.xi3(5,4,t.value.created_at,"medium")),e.xp6(5),e.Oqu(t.value.name),e.xp6(4),e.Oqu(null==t.value?null:t.value.description),e.xp6(2),e.Q6J("routerLink",e.VKq(7,N,t.key))}}const Q=function(){return["./create"]},F=u.Bz.forChild([{path:"",component:(()=>{class r extends w.r{constructor(t,n){super(),this.methodsHttp=t,this.snackBar=n,this.url="system-orders/workspaces",this.workspaces=[],this.key="id"}ngOnInit(){}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(v.s),e.Y36(J.ux))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-index-workspaces-orders"]],features:[e.qOj],decls:11,vars:7,consts:[["placeholder","Buscar espacio de nombre",3,"title","url$","data"],["menuBar",""],[1,"mat-orange","ml-2",3,"routerLink"],["data",""],["class","card border-0",4,"ngFor","ngForOf"],[1,"card","border-0"],[1,"d-flex","justify-content-end"],[1,"text-muted"],[1,"m-0"],["routerLinkActive","router-link-active","selected","","color","primary",3,"routerLink"],["color","warn","selected","",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div")(1,"app-search-template",0),e.NdJ("data",function(l){return n.getData(l)}),e.ynx(2,1),e.TgZ(3,"mat-chip-list")(4,"mat-chip",2)(5,"mat-icon"),e._uU(6,"workspaces"),e.qZA(),e._uU(7," Crear espacio de trabajo"),e.qZA()(),e.BQk(),e.ynx(8,3),e.YNc(9,I,23,9,"mat-card",4),e.ALo(10,"keyvalue"),e.BQk(),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("title","Workspaces de ordenes")("url$",n.url),e.xp6(3),e.Q6J("routerLink",e.DdM(6,Q)),e.xp6(5),e.Q6J("ngForOf",e.lcZ(10,4,n.data)))},dependencies:[c.sg,u.rH,u.Od,q._,m.qn,m.HS,d.Hw,p.a8,c.uU,c.Nd]}),r})()},{path:"create",component:k,data:{isEdit:!1}},{path:":id/edit",component:k,data:{isEdit:!0}}]);var P=o(82085);let S=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[c.ez,F,Z.r,i.UX,P.v,_.ot,m.Hi,d.Ps,f.lN,p.QW,h.c]}),r})()}}]);