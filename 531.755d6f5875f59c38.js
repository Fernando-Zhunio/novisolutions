"use strict";(self.webpackChunkng=self.webpackChunkng||[]).push([[531],{40479:(F,C,d)=>{d.d(C,{A2:()=>J,AY:()=>O,Bx:()=>f,C6:()=>Q,D1:()=>N,DY:()=>b,Gq:()=>Z,KE:()=>n,KV:()=>T,Py:()=>y,Qy:()=>p,Ww:()=>A,Xx:()=>E,Y:()=>w,f6:()=>v,g:()=>x,hN:()=>L,pI:()=>k,uQ:()=>q,v_:()=>I,vs:()=>U});const f={index:["super-admin","catalogs.products.prices.index"],show:["super-admin","catalogs.products.prices.show"],create:["super-admin","catalogs.products.prices.create"],edit:["super-admin","catalogs.products.prices.edit"],delete:["super-admin","catalogs.products.prices.destroy"],product_edit:["super-admin","products-admin.products.edit"]},y={prices:{index:["super-admin","catalogs.products.prices.index"],show:["super-admin","catalogs.products.prices.show"],create:["super-admin","catalogs.products.prices.create"],edit:["super-admin","catalogs.products.prices.edit"],delete:["super-admin","catalogs.products.prices.destroy"]}},n={categories:{index:["super-admin","products-admin.categories.index"],edit:["super-admin","products-admin.categories.edit"],destroy:["super-admin","products-admin.categories.destroy"],create:["super-admin","products-admin.categories.create"]}},w={brands:{index:["super-admin","products-admin.brands.index"],edit:["super-admin","products-admin.brands.edit"],destroy:["super-admin","products-admin.brands.destroy"],create:["super-admin","products-admin.brands.create"]}},b={prefixes:{index:["super-admin","products-admin.prefixes.index"],edit:["super-admin","products-admin.prefixes.edit"],destroy:["super-admin","products-admin.prefixes.destroy"],create:["super-admin","products-admin.prefixes.create"]}},A={location:{index:["super-admin","admin.locations.index"],show:["super-admin","admin.locations.show"],create:["super-admin","admin.locations.create"],edit:["super-admin","admin.locations.edit"],delete:["super-admin","admin.locations.destroy"]}},N={index:["catalogs.products.index","super-admin"],show:["catalogs.products.show","super-admin"],create:["catalogs.products.create","super-admin"],edit:["catalogs.products.edit","super-admin"],destroy:["catalogs.products.destroy","super-admin"]},p={index:["system-orders.orders.index","super-admin"],create:["system-orders.orders.create","super-admin"],edit:["system-orders.orders.edit","super-admin"],destroy:["system-orders.orders.destroy","super-admin"]},Z={index:["system-orders.orders.items.index","super-admin"],create:["system-orders.orders.items.create","super-admin"],edit:["system-orders.orders.items.edit","super-admin"],destroy:["system-orders.orders.items.destroy","super-admin"]},q={index:["system-orders.orders.shippings.index","super-admin"],create:["system-orders.orders.shippings.create","super-admin"],edit:["system-orders.orders.shippings.edit","super-admin"],destroy:["system-orders.orders.shippings.destroy","super-admin"],send:["system-orders.orders.shippings.send","super-admin"]},L={index:["system-orders.orders.payments.index","super-admin"],create:["system-orders.orders.payments.create","super-admin"],edit:["system-orders.orders.payments.edit","super-admin"],destroy:["system-orders.orders.payments.destroy","super-admin"]},v={index:["system-orders.orders.additional-amounts.index","super-admin"],create:["system-orders.orders.additional-amounts.create","super-admin"],edit:["system-orders.orders.additional-amounts.edit","super-admin"],destroy:["system-orders.orders.additional-amounts.destroy","super-admin"],confirm_retention:["system-orders.orders.additional-amounts.confirm-retention","super-admin"]},T={index:["system-orders.orders.transfers-mba.index","super-admin"],create:["system-orders.orders.transfers-mba.create","super-admin"],destroy:["system-orders.orders.transfers-mba.destroy","super-admin"]},x={index:["system-orders.orders.payments-mba.index","super-admin"],create:["system-orders.orders.payments-mba.create","super-admin"],destroy:["system-orders.orders.payments-mba.destroy","super-admin"]},k={index:["system-orders.orders.invoices-mba.index","super-admin"],create:["system-orders.orders.invoices-mba.create","super-admin"],destroy:["system-orders.orders.invoices-mba.destroy","super-admin"]},U={index:["system-orders.clients.index","super-admin"],create:["system-orders.clients.create","super-admin"],edit:["system-orders.clients.edit","super-admin"],destroy:["system-orders.clients.destroy","super-admin"]},I={index:["system-orders.tickets.index","super-admin"],create:["system-orders.tickets.create","super-admin"],edit:["system-orders.tickets.edit","super-admin"]},O={index:["locations.edit","super-admin"],create:["locations.create","super-admin"],edit:["locations.edit","super-admin"],destroy:["locations.destroy","super-admin"]},E={index:["system-orders.reports.index","super-admin"],create:["system-orders.reports.create","super-admin"],destroy:["system-orders.reports.destroy","super-admin"]},Q={index:["catalogs.rappi.products.index","super-admin"],edit:["catalogs.rappi.products.edit","super-admin"]},J={index:["prices-and-promotions.promotions.index","super-admin"],create:["prices-and-promotions.promotions.create","super-admin"],edit:["prices-and-promotions.promotions.edit","super-admin"],destroy:["prices-and-promotions.promotions.destroy","super-admin"]}},70531:(F,C,d)=>{d.r(C),d.d(C,{LocationModule:()=>De});var g=d(69808),f=d(59516),h=d(4721),y=d(40479),n=d(93075),w=d(92340),b=d(29724),e=d(5e3),A=d(95625),N=d(86405),p=d(67322),Z=d(47423),q=d(77531),L=d(32368),v=d(9224),T=d(25245),x=d(74107),k=d(90508);const U=["mapElement"];function I(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Nombre Requerido"),e.qZA())}function P(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Direcci\xf3n requerida"),e.qZA())}function O(o,a){if(1&o&&(e.TgZ(0,"mat-option",29),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function E(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Compa\xf1\xeda requerida"),e.qZA())}function Q(o,a){if(1&o&&(e.TgZ(0,"mat-option",29),e._uU(1),e.qZA()),2&o){const t=a.$implicit,i=e.oxw();e.Q6J("value",t),e.xp6(1),e.hij(" ",i.cities[t]," ")}}function J(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Cuidad Requerido"),e.qZA())}function H(o,a){if(1&o&&(e.TgZ(0,"mat-option",29),e._uU(1),e.qZA()),2&o){const t=a.$implicit,i=e.oxw();e.Q6J("value",t),e.xp6(1),e.hij(" ",i.types[t]," ")}}function B(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Estado Requerido"),e.qZA())}function R(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Latitud Requerido"),e.qZA())}function V(o,a){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Longitud requerida"),e.qZA())}function j(o,a){if(1&o){const t=e.EpF();e.ynx(0),e.TgZ(1,"td"),e._UZ(2,"input",42),e.qZA(),e.TgZ(3,"td",43)(4,"div",44),e._UZ(5,"input",45),e.TgZ(6,"button",46),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(2);let s;return e.KtG(r.autofillSchedules(null==(s=r.formSchedules.get("monday"))?null:s.value))}),e.TgZ(7,"mat-icon"),e._uU(8,"published_with_changes"),e.qZA()()()(),e.BQk()}}function G(o,a){1&o&&(e.ynx(0),e.TgZ(1,"td"),e._UZ(2,"input",47),e.qZA(),e.TgZ(3,"td"),e._UZ(4,"input",45),e.qZA(),e.BQk())}function $(o,a){1&o&&(e.ynx(0),e.TgZ(1,"td"),e._UZ(2,"input",47),e.qZA(),e.TgZ(3,"td"),e._UZ(4,"input",45),e.qZA(),e.BQk())}function z(o,a){1&o&&(e.ynx(0),e.TgZ(1,"td"),e._UZ(2,"input",47),e.qZA(),e.TgZ(3,"td"),e._UZ(4,"input",45),e.qZA(),e.BQk())}function K(o,a){1&o&&(e.ynx(0),e.TgZ(1,"td"),e._UZ(2,"input",47),e.qZA(),e.TgZ(3,"td"),e._UZ(4,"input",45),e.qZA(),e.BQk())}function W(o,a){1&o&&(e.ynx(0),e.TgZ(1,"td"),e._UZ(2,"input",47),e.qZA(),e.TgZ(3,"td"),e._UZ(4,"input",45),e.qZA(),e.BQk())}function X(o,a){1&o&&(e.ynx(0),e.TgZ(1,"td"),e._UZ(2,"input",47),e.qZA(),e.TgZ(3,"td"),e._UZ(4,"input",45),e.qZA(),e.BQk())}function ee(o,a){if(1&o&&(e.TgZ(0,"div",4)(1,"h3",30),e._uU(2,"Horario"),e.qZA(),e.TgZ(3,"div",31)(4,"table",32)(5,"thead")(6,"tr"),e._UZ(7,"th")(8,"th"),e.TgZ(9,"th"),e._uU(10,"Hora de apertura"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"Hora de cierre"),e.qZA()()(),e.TgZ(13,"tbody")(14,"tr",33)(15,"td"),e._uU(16,"Lunes"),e.qZA(),e.TgZ(17,"td")(18,"mat-slide-toggle",34,35),e._uU(20),e.qZA()(),e.YNc(21,j,9,0,"ng-container",8),e.qZA(),e.TgZ(22,"tr",33)(23,"td"),e._uU(24,"Martes"),e.qZA(),e.TgZ(25,"td")(26,"mat-slide-toggle",34,36),e._uU(28),e.qZA()(),e.YNc(29,G,5,0,"ng-container",8),e.qZA(),e.TgZ(30,"tr",33)(31,"td"),e._uU(32,"Mi\xe9rcoles"),e.qZA(),e.TgZ(33,"td")(34,"mat-slide-toggle",34,37),e._uU(36),e.qZA()(),e.YNc(37,$,5,0,"ng-container",8),e.qZA(),e.TgZ(38,"tr",33)(39,"td"),e._uU(40,"Jueves"),e.qZA(),e.TgZ(41,"td")(42,"mat-slide-toggle",34,38),e._uU(44),e.qZA()(),e.YNc(45,z,5,0,"ng-container",8),e.qZA(),e.TgZ(46,"tr",33)(47,"td"),e._uU(48,"Viernes"),e.qZA(),e.TgZ(49,"td")(50,"mat-slide-toggle",34,39),e._uU(52),e.qZA()(),e.YNc(53,K,5,0,"ng-container",8),e.qZA(),e.TgZ(54,"tr",33)(55,"td"),e._uU(56,"S\xe1bado"),e.qZA(),e.TgZ(57,"td")(58,"mat-slide-toggle",34,40),e._uU(60),e.qZA()(),e.YNc(61,W,5,0,"ng-container",8),e.qZA(),e.TgZ(62,"tr",33)(63,"td"),e._uU(64,"Domingo"),e.qZA(),e.TgZ(65,"td")(66,"mat-slide-toggle",34,41),e._uU(68),e.qZA()(),e.YNc(69,X,5,0,"ng-container",8),e.qZA()()()()()),2&o){const t=e.MAs(19),i=e.MAs(27),r=e.MAs(35),s=e.MAs(43),c=e.MAs(51),m=e.MAs(59),_=e.MAs(67),u=e.oxw();e.xp6(14),e.Q6J("formGroup",u.formSchedules.get("monday")),e.xp6(6),e.hij(" ",t.checked?"Abierto":"Cerrado"," "),e.xp6(1),e.Q6J("ngIf",t.checked),e.xp6(1),e.Q6J("formGroup",u.formSchedules.get("tuesday")),e.xp6(6),e.hij(" ",i.checked?"Abierto":"Cerrado"," "),e.xp6(1),e.Q6J("ngIf",i.checked),e.xp6(1),e.Q6J("formGroup",u.formSchedules.get("wednesday")),e.xp6(6),e.hij(" ",r.checked?"Abierto":"Cerrado"," "),e.xp6(1),e.Q6J("ngIf",r.checked),e.xp6(1),e.Q6J("formGroup",u.formSchedules.get("thursday")),e.xp6(6),e.hij(" ",s.checked?"Abierto":"Cerrado"," "),e.xp6(1),e.Q6J("ngIf",s.checked),e.xp6(1),e.Q6J("formGroup",u.formSchedules.get("friday")),e.xp6(6),e.hij(" ",c.checked?"Abierto":"Cerrado"," "),e.xp6(1),e.Q6J("ngIf",c.checked),e.xp6(1),e.Q6J("formGroup",u.formSchedules.get("saturday")),e.xp6(6),e.hij(" ",m.checked?"Abierto":"Cerrado"," "),e.xp6(1),e.Q6J("ngIf",m.checked),e.xp6(1),e.Q6J("formGroup",u.formSchedules.get("sunday")),e.xp6(6),e.hij(" ",_.checked?"Abierto":"Cerrado"," "),e.xp6(1),e.Q6J("ngIf",_.checked)}}let M=(()=>{class o{constructor(t,i,r,s,c){this.methodHttp=t,this.act_router=i,this.ngx_spinner=r,this.route=s,this.locationInject=c,this.state="create",this.keyCities=[],this.companies=[],this.types=[],this.keyTypes=[],this.title="Creando una localidad",this.isLoadServer=!1,this.coordinate={longitud:0,latitud:0},this.isEnabledMap=!1,this.formLocation=new n.cw({name:new n.NI("",[n.kI.required]),phone:new n.NI(""),mba_code:new n.NI(""),address:new n.NI("",[n.kI.required]),type:new n.NI("",[n.kI.required]),city:new n.NI(null,[n.kI.required]),company:new n.NI("",[n.kI.required]),status:new n.NI(null,[n.kI.required]),latitude:new n.NI(""),longitude:new n.NI("")}),this.formSchedules=new n.cw({monday:new n.cw({status:new n.NI(!0,[n.kI.required]),start:new n.NI(null),end:new n.NI(null)},[this.validateHours()]),tuesday:new n.cw({status:new n.NI(!0,[n.kI.required]),start:new n.NI(null),end:new n.NI(null)},[this.validateHours()]),wednesday:new n.cw({status:new n.NI(!0,[n.kI.required]),start:new n.NI(null,[n.kI.required]),end:new n.NI(null,[n.kI.required])},[this.validateHours()]),thursday:new n.cw({status:new n.NI(!0,[n.kI.required]),start:new n.NI(null,[n.kI.required]),end:new n.NI(null,[n.kI.required])},[this.validateHours()]),friday:new n.cw({status:new n.NI(!0,[n.kI.required]),start:new n.NI(null,[n.kI.required]),end:new n.NI(null,[n.kI.required])},[this.validateHours()]),saturday:new n.cw({status:new n.NI(!0,[n.kI.required]),start:new n.NI(null,[n.kI.required]),end:new n.NI(null,[n.kI.required])}),sunday:new n.cw({status:new n.NI(!0,[n.kI.required]),start:new n.NI(null,[n.kI.required]),end:new n.NI(null,[n.kI.required])},[this.validateHours()])})}ngOnInit(){this.ngx_spinner.show(),this.act_router.data.subscribe(t=>{if(this.state=t.isEdit?"edit":"create",t.isEdit){this.title="Editando Localidad";const i=Number.parseInt(this.act_router.snapshot.paramMap.get("id"));this.methodHttp.methodGet("admin/locations/"+i+"/edit").subscribe(s=>{if(null!=s&&s.success){this.setDataSelects(s.data),this.location=s.data.location;const{name:c,address:m,type:_,city_id:u,company_id:Ye,status:Se,latitude:Fe,longitude:He,mba_code:Be,phone:Re,schedules:S}=this.location;this.formLocation.patchValue({name:c,address:m,type:_,city:u.toString(),company:Ye,status:Se,latitude:Fe,longitude:He,phone:Re,mba_code:Be}),S&&this.formSchedules.patchValue(S),this.location.latitude&&this.location.longitude?(this.coordinate.latitud=Number.parseFloat(this.location.latitude),this.coordinate.longitud=Number.parseFloat(this.location.longitude),this.createMap(this.coordinate.longitud,this.coordinate.latitud),this.isEnabledMap=!0):this.getCurrentPosition()}this.ngx_spinner.hide()},()=>{this.ngx_spinner.hide()})}else this.methodHttp.methodGet("admin/locations/create").subscribe(i=>{null!=i&&i.success&&(console.log(i.data,i),this.setDataSelects(i.data)),this.ngx_spinner.hide()},()=>{this.ngx_spinner.hide()})})}autofillSchedules(t){var i,r,s,c,m,_,u;null===(i=this.formSchedules.get("monday"))||void 0===i||i.setValue(t),null===(r=this.formSchedules.get("tuesday"))||void 0===r||r.setValue(t),null===(s=this.formSchedules.get("wednesday"))||void 0===s||s.setValue(t),null===(c=this.formSchedules.get("thursday"))||void 0===c||c.setValue(t),null===(m=this.formSchedules.get("friday"))||void 0===m||m.setValue(t),null===(_=this.formSchedules.get("saturday"))||void 0===_||_.setValue(t),null===(u=this.formSchedules.get("sunday"))||void 0===u||u.setValue(t)}getCurrentPosition(){"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(t=>{const i={lat:t.coords.latitude,lon:t.coords.longitude};this.createMap(i.lon,i.lat),this.coordinate.latitud=i.lat,this.coordinate.longitud=i.lon})}setDataSelects(t){this.companies=t.companies,this.cities=t.cities,console.log(this.cities,t),this.keyCities=Object.keys(this.cities),this.types=t.types,this.keyTypes=Object.keys(this.types)}ngAfterViewInit(){this.getCurrentPosition()}createMap(t=0,i=0){mapboxgl.accessToken=w.N.mapbox_key,this.map=new mapboxgl.Map({container:this.mapElement.nativeElement,style:"mapbox://styles/mapbox/streets-v11",center:[t,i],zoom:9}),this.map.resize(),this.map.addControl(new mapboxgl.NavigationControl),this.marker=new mapboxgl.Marker({draggable:!0}).setLngLat([t,i]).addTo(this.map),this.marker.on("dragend",()=>{var s,c,m=this.marker.getLngLat();this.coordinate.latitud=m.lat,this.coordinate.longitud=m.lng,null===(s=this.formLocation.get("latitude"))||void 0===s||s.setValue(String(this.coordinate.latitud)),null===(c=this.formLocation.get("longitude"))||void 0===c||c.setValue(String(this.coordinate.longitud))})}goBack(){this.locationInject.back()}enableAndDisableMap(t){t.checked?(this.map.boxZoom.enable(),this.map.scrollZoom.enable(),this.map.dragPan.enable(),this.map.dragRotate.enable(),this.map.keyboard.enable(),this.map.doubleClickZoom.enable(),this.map.touchZoomRotate.enable()):(this.map.boxZoom.disable(),this.map.scrollZoom.disable(),this.map.dragPan.disable(),this.map.dragRotate.disable(),this.map.keyboard.disable(),this.map.doubleClickZoom.disable(),this.map.touchZoomRotate.disable())}saveInServer(){var t;const i=this.validateFormSchedule();if(this.formLocation.valid&&i){this.isLoadServer=!0;let r=this.formLocation.value;"store"==(null===(t=this.formLocation.get("type"))||void 0===t?void 0:t.value)&&(r.schedules=this.formSchedules.value),"create"===this.state?this.methodHttp.methodPost("admin/locations",r).subscribe(s=>{null!=s&&s.success?this.route.navigate(["administracion-sistema/locations"]):this.isLoadServer=!1},()=>{this.isLoadServer=!1}):this.methodHttp.methodPut("admin/locations/"+this.location.id,r).subscribe(s=>{null!=s&&s.success?this.route.navigate(["administracion-sistema/locations"]):this.isLoadServer=!1},s=>{console.log(s),this.isLoadServer=!1})}else this.formLocation.markAllAsTouched()}validateFormSchedule(){var t;const i="store"!=(null===(t=this.formLocation.get("type"))||void 0===t?void 0:t.value)||this.formSchedules.valid;return i||(this.formSchedules.markAsTouched(),b.J.swalFire({title:"\xa1Atenci\xf3n!",text:"Debe ingresar un horario valido, donde la hora de apertura sea menor a la hora de cierre",icon:"warning"})),i}addLocationValidationRequired(){var t,i;console.log("addLocationValidationRequired"),null===(t=this.formLocation.get("latitude"))||void 0===t||t.addValidators([n.kI.required]),null===(i=this.formLocation.get("longitude"))||void 0===i||i.addValidators([n.kI.required])}removeLocationValidationRequired(){var t,i;null===(t=this.formLocation.get("latitude"))||void 0===t||t.removeValidators([n.kI.required]),null===(i=this.formLocation.get("longitude"))||void 0===i||i.removeValidators([n.kI.required])}validateHours(){return t=>{var i,r,s,c,m;return null!==(i=t.get("start"))&&void 0!==i&&i.value&&(null===(r=t.get("start"))||void 0===r?void 0:r.value)&&(null===(s=t.get("end"))||void 0===s?void 0:s.value)&&(null===(c=t.get("start"))||void 0===c?void 0:c.value)>(null===(m=t.get("end"))||void 0===m?void 0:m.value)?{invalidHours:!0}:null}}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(A.s),e.Y36(f.gz),e.Y36(N.t2),e.Y36(f.F0),e.Y36(g.Ye))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-create-or-edit-location"]],viewQuery:function(t,i){if(1&t&&e.Gf(U,5),2&t){let r;e.iGM(r=e.CRH())&&(i.mapElement=r.first)}},decls:81,vars:16,consts:[[1,"mt-4"],[1,"font-4xl","d-flex","align-items-center","font-weight-bold","d-inline-block"],["mat-mini-fab","",1,"mb-2",3,"click"],[1,"row",3,"formGroup"],[1,"col-md-6"],[1,"row","m-0"],[1,"w-100"],["matInput","","formControlName","name","type","text","required",""],[4,"ngIf"],["type","address","matInput","","formControlName","address","required",""],[1,"row","w-100"],["formControlName","company","required",""],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","phone","type","text"],["formControlName","city","required",""],["formControlName","type","required",""],["matInput","","formControlName","mba_code"],["formControlName","status","required",""],["value","active"],["value","inactive"],["matInput","","formControlName","latitude","type","number"],["type","number","matInput","","formControlName","longitude"],["class","col-md-6",4,"ngIf"],[1,"position-relative","w-100","container","p-0","shadow-lg","rounded-fz","overflow-hidden","mb-3"],["id","map"],["mapElement",""],[1,"coordinate","px-md-5","px-1"],[1,"col-md-12"],["mat-raised-button","","color","primary",3,"disabled","click"],[3,"value"],[1,"font-4xl","m-0","p-2"],[1,"p-2","rounded-fz","shadow"],[1,"table-borderless","table","table-sm"],[3,"formGroup"],["formControlName","status","color","primary"],["monday",""],["tuesday",""],["wednesday",""],["thursday",""],["friday",""],["saturday",""],["sunday",""],["placeholder","Hora de apertura","matInput","","formControlName","start","type","time"],[1,"position-relative"],[1,"suffix-fill"],["matInput","","formControlName","end","type","time"],["mat-icon-button","",3,"click"],["matInput","","formControlName","start","type","time"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"h2",1)(2,"button",2),e.NdJ("click",function(){return i.goBack()}),e.TgZ(3,"mat-icon"),e._uU(4,"keyboard_return"),e.qZA()(),e.TgZ(5,"span"),e._uU(6),e.qZA()(),e.TgZ(7,"mat-card")(8,"mat-card-content")(9,"div",3)(10,"div",4)(11,"div",5)(12,"mat-form-field",6)(13,"mat-label"),e._uU(14,"Nombre"),e.qZA(),e._UZ(15,"input",7),e.YNc(16,I,2,0,"mat-error",8),e.qZA(),e.TgZ(17,"mat-form-field",6)(18,"mat-label"),e._uU(19,"Direcci\xf3n"),e.qZA(),e._UZ(20,"textarea",9),e.YNc(21,P,2,0,"mat-error",8),e.qZA(),e.TgZ(22,"div",10)(23,"mat-form-field",4)(24,"mat-label"),e._uU(25,"Seleccione una Compa\xf1\xeda"),e.qZA(),e.TgZ(26,"mat-select",11),e.YNc(27,O,2,2,"mat-option",12),e.qZA(),e.YNc(28,E,2,0,"mat-error",8),e.qZA(),e.TgZ(29,"mat-form-field",4)(30,"mat-label"),e._uU(31,"Tel\xe9fono"),e.qZA(),e._UZ(32,"input",13),e.qZA()(),e.TgZ(33,"div",10)(34,"mat-form-field",4)(35,"mat-label"),e._uU(36,"Seleccione una ciudad"),e.qZA(),e.TgZ(37,"mat-select",14),e.YNc(38,Q,2,2,"mat-option",12),e.qZA(),e.YNc(39,J,2,0,"mat-error",8),e.qZA(),e.TgZ(40,"mat-form-field",4)(41,"mat-label"),e._uU(42,"Seleccione un tipo"),e.qZA(),e.TgZ(43,"mat-select",15),e.YNc(44,H,2,2,"mat-option",12),e.qZA()()(),e.TgZ(45,"div",10)(46,"mat-form-field",4)(47,"mat-label"),e._uU(48,"C\xf3digo mba"),e.qZA(),e._UZ(49,"input",16),e.qZA(),e.TgZ(50,"mat-form-field",4)(51,"mat-label"),e._uU(52,"Seleccione un estado"),e.qZA(),e.TgZ(53,"mat-select",17)(54,"mat-option",18),e._uU(55,"Activo"),e.qZA(),e.TgZ(56,"mat-option",19),e._uU(57,"Inactivo"),e.qZA()(),e.YNc(58,B,2,0,"mat-error",8),e.qZA()(),e.TgZ(59,"mat-form-field",6)(60,"mat-label"),e._uU(61,"Latitud"),e.qZA(),e._UZ(62,"input",20),e.YNc(63,R,2,0,"mat-error",8),e.qZA(),e.TgZ(64,"mat-form-field",6)(65,"mat-label"),e._uU(66,"Longitud"),e.qZA(),e._UZ(67,"input",21),e.YNc(68,V,2,0,"mat-error",8),e.qZA()()(),e.YNc(69,ee,70,21,"div",22),e.TgZ(70,"div",4)(71,"div",23),e._UZ(72,"div",24,25),e.TgZ(74,"div",26),e._uU(75),e._UZ(76,"br"),e._uU(77),e.qZA()()(),e.TgZ(78,"div",27)(79,"button",28),e.NdJ("click",function(){return i.saveInServer()}),e._uU(80," Guardar localidad "),e.qZA()()()()()()),2&t){let r;e.xp6(6),e.hij("\xa0",i.title,""),e.xp6(3),e.Q6J("formGroup",i.formLocation),e.xp6(7),e.Q6J("ngIf",i.formLocation.controls.name.invalid),e.xp6(5),e.Q6J("ngIf",i.formLocation.controls.address.invalid),e.xp6(6),e.Q6J("ngForOf",i.companies),e.xp6(1),e.Q6J("ngIf",i.formLocation.controls.company.invalid),e.xp6(10),e.Q6J("ngForOf",i.keyCities),e.xp6(1),e.Q6J("ngIf",i.formLocation.controls.city.invalid),e.xp6(5),e.Q6J("ngForOf",i.keyTypes),e.xp6(14),e.Q6J("ngIf",i.formLocation.controls.status.invalid),e.xp6(5),e.Q6J("ngIf",i.formLocation.controls.latitude.invalid),e.xp6(5),e.Q6J("ngIf",i.formLocation.controls.longitude.invalid),e.xp6(1),e.Q6J("ngIf","store"===(null==(r=i.formLocation.get("type"))?null:r.value)),e.xp6(6),e.hij(" Longitud : ",null==i.coordinate?null:i.coordinate.longitud," "),e.xp6(2),e.hij(" Latitud : ",null==i.coordinate?null:i.coordinate.latitud," "),e.xp6(2),e.Q6J("disabled",i.isLoadServer)}},dependencies:[g.sg,g.O5,n.Fj,n.wV,n.JJ,n.JL,n.Q7,n.sg,n.u,p.TO,p.KE,p.hX,Z.lW,q.Nt,L.Rr,v.a8,v.dn,T.Hw,x.gD,k.ey],styles:["#map[_ngcontent-%COMP%]{width:100%!important;height:400px!important}.coordinate[_ngcontent-%COMP%]{position:absolute;top:10px;left:10px}.block-map[_ngcontent-%COMP%]{left:0;z-index:1;background-color:#90919371}input[type=time][_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none}input[type=time][_ngcontent-%COMP%]::-webkit-clear-button{-webkit-appearance:none}input[type=time][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{-webkit-appearance:none}input[type=time][_ngcontent-%COMP%]{-webkit-appearance:none;appearance:none;border:2px solid #ccc;border-radius:10px;padding:7px;width:90%;background:#fff;color:#000;font-size:18px;position:relative}.suffix-fill[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;top:0px;right:27px}td[_ngcontent-%COMP%]{vertical-align:middle}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]:first-child{font-size:1rem!important}"]}),o})();var l=d(32075),te=d(72349),oe=d(57261),ie=d(28300),D=d(26688),Y=d(92181);function ne(o,a){1&o&&(e.TgZ(0,"th",29),e._uU(1,"#"),e.qZA())}function ae(o,a){if(1&o&&(e.TgZ(0,"td",30),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.Oqu(t.id)}}function se(o,a){1&o&&(e.TgZ(0,"th",29),e._uU(1,"Nombre"),e.qZA())}function re(o,a){if(1&o&&(e.TgZ(0,"td",30),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.Oqu(null==t?null:t.name)}}function de(o,a){1&o&&(e.TgZ(0,"th",29),e._uU(1,"Tipo"),e.qZA())}function ce(o,a){if(1&o&&(e.TgZ(0,"td",30),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.Oqu(t.type)}}function me(o,a){1&o&&(e.TgZ(0,"th",29),e._uU(1,"Estado"),e.qZA())}function le(o,a){if(1&o&&(e.TgZ(0,"td",30)(1,"span",31),e._uU(2),e.qZA()()),2&o){const t=a.$implicit;e.xp6(1),e.Q6J("ngClass","active"===t.status?"bg-success":"bg-danger"),e.xp6(1),e.Oqu(t.status)}}function ue(o,a){1&o&&(e.TgZ(0,"th",29),e._uU(1,"C\xf3digo mba"),e.qZA())}function pe(o,a){if(1&o&&(e.TgZ(0,"td",30),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.Oqu(t.mba_code)}}function _e(o,a){1&o&&(e.TgZ(0,"th",29),e._uU(1,"Direcci\xf3n"),e.qZA())}function ge(o,a){if(1&o&&(e.TgZ(0,"td",30),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.Oqu(t.address)}}function he(o,a){1&o&&(e.TgZ(0,"th",29),e._uU(1,"Latitud"),e.qZA())}function fe(o,a){if(1&o&&(e.TgZ(0,"td",30),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.Oqu(t.latitude)}}function ye(o,a){1&o&&(e.TgZ(0,"th",29),e._uU(1,"Longitud"),e.qZA())}function Ze(o,a){if(1&o&&(e.TgZ(0,"td",30),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.Oqu(t.longitude)}}function ve(o,a){1&o&&(e.TgZ(0,"th",29),e._uU(1,"Ciudad"),e.qZA())}function Te(o,a){if(1&o&&(e.TgZ(0,"td",30),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.Oqu(t.city.name)}}function xe(o,a){1&o&&(e.TgZ(0,"th",29),e._uU(1,"Compa\xf1\xeda"),e.qZA())}function Ce(o,a){if(1&o&&(e.TgZ(0,"td",30),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.Oqu(t.company.name)}}function be(o,a){1&o&&(e.TgZ(0,"th",29),e._uU(1,"Acciones"),e.qZA())}const Ae=function(o){return["./edit",o]};function qe(o,a){if(1&o&&(e.TgZ(0,"button",35)(1,"mat-icon"),e._uU(2,"edit"),e.qZA()()),2&o){const t=e.oxw().$implicit;e.Q6J("routerLink",e.VKq(1,Ae,t.id))}}function Le(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",36),e.NdJ("click",function(){e.CHM(t);const r=e.oxw().$implicit,s=e.oxw();return e.KtG(s.deleteItem(r.id))}),e.TgZ(1,"mat-icon"),e._uU(2,"delete"),e.qZA()()}}function ke(o,a){if(1&o&&(e.TgZ(0,"td",30)(1,"div",32),e.YNc(2,qe,3,3,"button",33),e.YNc(3,Le,3,0,"button",34),e.qZA()()),2&o){const t=e.oxw();e.xp6(2),e.Q6J("ngxPermissionsOnly",t.permission_edit),e.xp6(1),e.Q6J("ngxPermissionsOnly",t.permission_destroy)}}function we(o,a){1&o&&e._UZ(0,"tr",37)}function Ne(o,a){1&o&&e._UZ(0,"tr",38)}const Ue=function(){return["./create"]};function Ie(o,a){1&o&&(e.ynx(0,39),e.TgZ(1,"mat-chip",40)(2,"mat-icon"),e._uU(3,"add_location_alt"),e.qZA(),e._uU(4," \xa0Agregar locaci\xf3n "),e.qZA(),e.BQk()),2&o&&(e.xp6(1),e.Q6J("routerLink",e.DdM(1,Ue)))}function Oe(o,a){if(1&o&&(e.TgZ(0,"mat-option",41),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function Ee(o,a){if(1&o&&(e.TgZ(0,"mat-option",41),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.name," ")}}function Qe(o,a){if(1&o&&(e.TgZ(0,"mat-option",41),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",t," ")}}const Pe=f.Bz.forChild([{path:"",children:[{path:"",component:(()=>{class o{constructor(t,i){this.methodsHttp=t,this.snack_bar=i,this.displayedColumns=["id","name","type","status","mba_code","address","latitude","longitude","city","company","acciones"],this.ELEMENT_DATA=[],this.permission_create=["super-admin","admin.users.create"],this.permission_edit=["super-admin","admin.users.edit"],this.permission_destroy=["super-admin","admin.users.destroy"],this.dataSource=new l.by(this.ELEMENT_DATA),this.cities=[],this.types=[],this.companies=[],this.filters={city_id:null,company_id:null,status:null,type:null}}ngOnInit(){this.getDataFilters()}getDataFilters(){this.methodsHttp.methodGet("admin/locations/data-filter").subscribe({next:t=>{null!=t&&t.success&&(this.cities=t.data.cities,this.companies=t.data.companies,this.types=t.data.types)}})}refreshDataTable(t){this.ELEMENT_DATA=t.data,this.dataSource=new l.by(this.ELEMENT_DATA)}deleteItem(t){b.J.swalConfirmation("Eliminar","Esta seguro de eliminar esta locaci\xf3n","warning").then(i=>{i.isConfirmed?(this.snack_bar.open("Eliminando locaci\xf3n espere ..."),this.methodsHttp.methodDelete("admin/locations/"+t).subscribe(r=>{r.hasOwnProperty("success")&&r.success?(this.snack_bar.open("Localidad Eliminada con \xe9xito","OK",{duration:2e3}),this.removeItemTable(t)):this.snack_bar.open("No se a podido eliminar ","Error",{duration:2e3})},r=>{console.log(r),this.snack_bar.open("No se a podido eliminar ","Error",{duration:2e3})})):Swal})}removeItemTable(t){const i=this.ELEMENT_DATA.findIndex(r=>r.id==t);this.ELEMENT_DATA.splice(i,1),this.dataSource=new l.by(this.ELEMENT_DATA)}loadData(t){console.log(t),this.refreshDataTable(t)}changePaginator(t){this.headerComponent.searchBar(t)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(A.s),e.Y36(oe.ux))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-locaciones"]],viewQuery:function(t,i){if(1&t&&e.Gf(te.H,5),2&t){let r;e.iGM(r=e.CRH())&&(i.headerComponent=r.first)}},decls:79,vars:22,consts:[[1,""],["placeholder","Escriba la locaci\xf3n a buscar",3,"customLoader","customTemplate","title","columns","url$","filter_data","active_filters_menu","data"],["customTemplate",""],[1,"w-100"],[1,"overflow-auto","shadow"],["mat-table","",1,"mat-elevation-z8","w-100",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","type"],["matColumnDef","status"],["matColumnDef","mba_code"],["matColumnDef","address"],["matColumnDef","latitude"],["matColumnDef","longitude"],["matColumnDef","city"],["matColumnDef","company"],["matColumnDef","acciones","stickyEnd",""],["mat-header-row","","style","top: 67px",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["menuBar","",4,"ngxPermissionsOnly"],["filterMenu",""],["mat-menu-item","",3,"disableRipple","click","keydown"],[3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],["value","active"],["value","inactive"],["mat-header-cell",""],["mat-cell",""],[1,"badge",3,"ngClass"],[1,"d-flex"],["mat-icon-button","","color","primary",3,"routerLink",4,"ngxPermissionsOnly"],["mat-icon-button","","color","warn",3,"click",4,"ngxPermissionsOnly"],["mat-icon-button","","color","primary",3,"routerLink"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row","",2,"top","67px"],["mat-row",""],["menuBar",""],[1,"ml-1","mat-btn-add",3,"routerLink"],[3,"value"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"app-search-template",1),e.NdJ("data",function(s){return i.loadData(s)}),e.ynx(2,2),e.TgZ(3,"div",3)(4,"div",4)(5,"table",5),e.ynx(6,6),e.YNc(7,ne,2,0,"th",7),e.YNc(8,ae,2,1,"td",8),e.BQk(),e.ynx(9,9),e.YNc(10,se,2,0,"th",7),e.YNc(11,re,2,1,"td",8),e.BQk(),e.ynx(12,10),e.YNc(13,de,2,0,"th",7),e.YNc(14,ce,2,1,"td",8),e.BQk(),e.ynx(15,11),e.YNc(16,me,2,0,"th",7),e.YNc(17,le,3,2,"td",8),e.BQk(),e.ynx(18,12),e.YNc(19,ue,2,0,"th",7),e.YNc(20,pe,2,1,"td",8),e.BQk(),e.ynx(21,13),e.YNc(22,_e,2,0,"th",7),e.YNc(23,ge,2,1,"td",8),e.BQk(),e.ynx(24,14),e.YNc(25,he,2,0,"th",7),e.YNc(26,fe,2,1,"td",8),e.BQk(),e.ynx(27,15),e.YNc(28,ye,2,0,"th",7),e.YNc(29,Ze,2,1,"td",8),e.BQk(),e.ynx(30,16),e.YNc(31,ve,2,0,"th",7),e.YNc(32,Te,2,1,"td",8),e.BQk(),e.ynx(33,17),e.YNc(34,xe,2,0,"th",7),e.YNc(35,Ce,2,1,"td",8),e.BQk(),e.ynx(36,18),e.YNc(37,be,2,0,"th",7),e.YNc(38,ke,4,2,"td",8),e.BQk(),e.YNc(39,we,1,0,"tr",19),e.YNc(40,Ne,1,0,"tr",20),e.qZA()()(),e.BQk(),e.YNc(41,Ie,5,2,"ng-container",21),e.ynx(42,22),e.TgZ(43,"div",23),e.NdJ("click",function(s){return s.stopPropagation()})("keydown",function(s){return s.stopPropagation()}),e.TgZ(44,"mat-form-field",3)(45,"mat-label"),e._uU(46,"Ciudades"),e.qZA(),e.TgZ(47,"mat-select",24),e.NdJ("ngModelChange",function(s){return i.filters.city_id=s}),e.TgZ(48,"mat-option",25),e._uU(49,"Todos las ciudades"),e.qZA(),e.YNc(50,Oe,2,2,"mat-option",26),e.qZA()()(),e.TgZ(51,"div",23),e.NdJ("click",function(s){return s.stopPropagation()})("keydown",function(s){return s.stopPropagation()}),e.TgZ(52,"mat-form-field",3)(53,"mat-label"),e._uU(54,"Compa\xf1\xeda"),e.qZA(),e.TgZ(55,"mat-select",24),e.NdJ("ngModelChange",function(s){return i.filters.company_id=s}),e.TgZ(56,"mat-option",25),e._uU(57,"Todos las compa\xf1\xeda"),e.qZA(),e.YNc(58,Ee,2,2,"mat-option",26),e.qZA()()(),e.TgZ(59,"div",23),e.NdJ("click",function(s){return s.stopPropagation()})("keydown",function(s){return s.stopPropagation()}),e.TgZ(60,"mat-form-field",3)(61,"mat-label"),e._uU(62,"Estado"),e.qZA(),e.TgZ(63,"mat-select",24),e.NdJ("ngModelChange",function(s){return i.filters.status=s}),e.TgZ(64,"mat-option",25),e._uU(65,"Todos los estados"),e.qZA(),e.TgZ(66,"mat-option",27),e._uU(67,"Activos"),e.qZA(),e.TgZ(68,"mat-option",28),e._uU(69,"Inactivos"),e.qZA()()()(),e.TgZ(70,"div",23),e.NdJ("click",function(s){return s.stopPropagation()})("keydown",function(s){return s.stopPropagation()}),e.TgZ(71,"mat-form-field",3)(72,"mat-label"),e._uU(73,"Tipo"),e.qZA(),e.TgZ(74,"mat-select",24),e.NdJ("ngModelChange",function(s){return i.filters.type=s}),e.TgZ(75,"mat-option",25),e._uU(76,"Todos los tipos"),e.qZA(),e.YNc(77,Qe,2,2,"mat-option",26),e.qZA()()(),e.BQk(),e.qZA()(),e._UZ(78,"div")),2&t&&(e.xp6(1),e.Q6J("customLoader",!0)("customTemplate",!0)("title","Locaciones")("columns",1)("url$","admin/locations")("filter_data",i.filters)("active_filters_menu",!0),e.xp6(4),e.Q6J("dataSource",i.dataSource),e.xp6(34),e.Q6J("matHeaderRowDef",i.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",i.displayedColumns),e.xp6(1),e.Q6J("ngxPermissionsOnly",i.permission_create),e.xp6(2),e.Q6J("disableRipple",!0),e.xp6(4),e.Q6J("ngModel",i.filters.city_id),e.xp6(3),e.Q6J("ngForOf",i.cities),e.xp6(1),e.Q6J("disableRipple",!0),e.xp6(4),e.Q6J("ngModel",i.filters.company_id),e.xp6(3),e.Q6J("ngForOf",i.companies),e.xp6(1),e.Q6J("disableRipple",!0),e.xp6(4),e.Q6J("ngModel",i.filters.status),e.xp6(7),e.Q6J("disableRipple",!0),e.xp6(4),e.Q6J("ngModel",i.filters.type),e.xp6(3),e.Q6J("ngForOf",i.types))},dependencies:[g.mk,g.sg,f.rH,n.JJ,p.KE,p.hX,Z.lW,T.Hw,x.gD,k.ey,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,ie._,h.gE,D.HS,Y.OP,n.On],styles:["td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{padding-left:10px!important;padding-right:10px!important}"]}),o})(),data:{permissions:{only:y.Ww.location.index}},canActivate:[h.DD]},{path:"create",component:M,data:{isEdit:!1,permissions:{only:y.Ww.location.create}},canActivate:[h.DD]},{path:"edit/:id",component:M,data:{isEdit:!0,permissions:{only:y.Ww.location.edit}},canActivate:[h.DD]}],data:{permissions:{only:y.Ww.location.index}},canActivate:[h.DD]}]);var Me=d(75401);let De=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[g.ez,Pe,n.UX,p.lN,Z.ot,q.c,L.rP,v.QW,T.Ps,x.LD,l.p0,Me.r,h.VI,D.Hi,Y.Tx,n.u5]}),o})()}}]);