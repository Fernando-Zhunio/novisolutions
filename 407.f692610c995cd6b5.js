"use strict";(self.webpackChunkng=self.webpackChunkng||[]).push([[407],{82085:(S,C,i)=>{i.d(C,{v:()=>f});var o=i(69808),h=i(86087),x=i(93075),d=i(85899),v=i(5e3);let f=(()=>{class g{}return g.\u0275fac=function(T){return new(T||g)},g.\u0275mod=v.oAB({type:g}),g.\u0275inj=v.cJS({imports:[o.ez,x.u5,h.TU,d.Cv]}),g})()},95518:(S,C,i)=>{i.d(C,{d:()=>g});const f={promotions:Object.assign({},{permanent:"Permanente",date_range:"Rango de fechas",out_stock:"Hasta agotar stock"}),default:Object.assign({},{active:"Activo",inactive:"Inactivo",closed:"Cerrado",date_range:"Rango de fechas",open:"Abierto",undefined:"Indefinido"}),orders:{tax:"Impuestos",percent:"Porcentaje",retention:"Retenci\xf3n",discount:"Descuento",fixed:"Fijo",default:"Por defecto",receivable:"Por cobrar",payment_with_retention:"Por pago con retenci\xf3n",reservation_paid:"Por reserva pagada",credit_card:"Tarjeta de cr\xe9dito",cash:"Efectivo",debit_card:"Tarjeta de d\xe9bito",wire:"Transferencia",wire_transfer:"Transferencia",paymentez:"Paymentez",pending:"Pendiente",paid:"Pagado",refunded:"Reembolsado",cancelled:"Cancelado",created:"Creado",generated_guide:"Gu\xeda generada",shipped:"Enviado",in_transit:"En tr\xe1nsito",delivered:"Entregado",returned:"Devuelto",confirmed:"Confirmado",payment_paid:"Pagado",payment_partially_paid:"Parcialmente pagado",payment_refunded:"Reembolsado",payment_partially_refunded:"Parcialmente reembolsado",shipping_shipped:"Enviado",shipping_partially_shipped:"Parcialmente enviado",shipping_partially_delivered:"Parcialmente entregado",shipping_returned:"Devuelto",shipping_partially_returned:"Parcialmente devuelto",shipping_delivered:"Entregado",shipping_partially_processed:"Env\xedo Parcialmente procesado",shipping_processed:"Env\xedo procesado",generated:"Generado",in_review:"En revisi\xf3n",rejected:"Rechazado",expired:"Expirado",init:"Iniciado",processed:"Procesado",published:"Publicado",canceled:"Cancelado",deferred:"Diferido",single:"Corriente",sended:"Solicitada",partially_confirmed:"Parcialmente confirmada",unsynced:"Esperando sincronizaci\xf3n"},order_channels:{webstore:"Pagina Web",whatsapp:"Whatsapp",marketplace:"Tienda",other:"Otro medio"},method_pay:{"Credit Card":"Tarjeta de cr\xe9dito","Boleto (Bank Ticket)":"Boleto (Bank Ticket)","E-wallet":"E-wallet","Vouchers Card":"Vouchers Card","Bank Transfer":"Transferencia","Debit Card":"Tarjeta de d\xe9bito","Prepaid Card":"Tarjeta prepagada"}};function g(t,T){return f[T]?f[T][t]:"error traducci\xf3n"}},29055:(S,C,i)=>{i.d(C,{g:()=>U});var o=i(5e3),h=i(86087),x=i(95625),d=i(69808),v=i(93075),f=i(85899);function g(p,Z){if(1&p&&(o.TgZ(0,"div")(1,"h2",10),o._uU(2),o.Hsn(3,2),o.qZA()()),2&p){const l=o.oxw();o.xp6(2),o.hij(" ",l.title," ")}}function t(p,Z){1&p&&(o.ynx(0),o.Hsn(1,3),o.BQk())}function T(p,Z){if(1&p&&(o.TgZ(0,"div",11)(1,"div",12)(2,"p",13),o._uU(3),o.qZA(),o._UZ(4,"mat-progress-bar",14),o.qZA()()),2&p){const l=o.oxw();o.xp6(3),o.Oqu(l.commentLoading)}}function y(p,Z){1&p&&(o.TgZ(0,"div")(1,"h2",11),o._uU(2,"No hay resultados"),o.qZA()())}function O(p,Z){1&p&&(o.TgZ(0,"div",15),o._uU(1," Comienza a buscar "),o.qZA())}const P=function(){return[10,20,30]};function E(p,Z){if(1&p){const l=o.EpF();o.TgZ(0,"mat-paginator",16),o.NdJ("page",function(_){o.CHM(l);const I=o.oxw();return o.KtG(I.changePaginator(_))}),o.qZA()}if(2&p){const l=o.oxw();o.Q6J("hidden",l.isLoading)("pageSizeOptions",o.DdM(5,P))("pageSize",l.paginator.pageSize)("length",l.paginator.length)("pageIndex",l.paginator.pageIndex)}}const M=[[["","inputBtn",""]],[["","comment",""]],[["","moreTitle",""]],[["","data",""]]],b=["[inputBtn]","[comment]","[moreTitle]","[data]"];let U=(()=>{class p{constructor(l){this.methodsHttp=l,this.classes="",this.title=null,this.placeholder="Buscador",this.init=!0,this.styles="",this.commentLoading="Cargando espere por favor...",this.data=new o.vpe,this.isLoading=!1,this.paginator=new h.kl,this.textSearch=""}ngOnInit(){this.paginator.length=0,this.paginator.pageIndex=0,this.paginator.pageSize=10,this.init?this.search():this.isLoading=void 0,console.log(this.isLoading)}search(l=null){this.isLoading=!0,this.methodsHttp.methodGetPaginate(this.url,{page:(l=l||this.paginator).pageIndex+1,pageSize:l.pageSize,search:this.textSearch}).subscribe(_=>{this.isLoading=!1,this.paginator.length=_.data.total,this.paginator.pageIndex=_.data.current_page-1,this.paginator.pageSize=_.data.per_page,this.data.emit(_.data)},_=>{this.isLoading=!1,console.log(_)})}searchText(){this.search({pageIndex:0,pageSize:this.paginator.pageSize,length:0})}changePaginator(l){this.paginator=l,this.search()}}return p.\u0275fac=function(l){return new(l||p)(o.Y36(x.s))},p.\u0275cmp=o.Xpm({type:p,selectors:[["app-search"]],inputs:{classes:"classes",title:"title",placeholder:"placeholder",url:"url",init:"init",styles:"styles",commentLoading:"commentLoading"},outputs:{data:"data"},ngContentSelectors:b,decls:17,vars:10,consts:[[4,"ngIf"],[1,"mt-3","sticky-top"],[1,"content-input","p-1","position-relative","center"],["type","text",1,"input-default","shadow",3,"placeholder","ngModel","keydown.enter","ngModelChange"],[1,"btn-default",3,"click"],[1,"fa-solid","fa-magnifying-glass"],[1,"content-btns"],["class","text-center",4,"ngIf"],["class","font-weight-lighter lead m-3 text-center",4,"ngIf"],["showFirstLastButtons","",3,"hidden","pageSizeOptions","pageSize","length","pageIndex","page",4,"ngIf"],[1,"my-2","font-3xl"],[1,"text-center"],[1,"text-muted","justify-content-center","my-2"],[1,"font-2xl"],["color","accent","mode","buffer"],[1,"font-weight-lighter","lead","m-3","text-center"],["showFirstLastButtons","",3,"hidden","pageSizeOptions","pageSize","length","pageIndex","page"]],template:function(l,u){1&l&&(o.F$t(M),o.TgZ(0,"div"),o.YNc(1,g,4,1,"div",0),o.TgZ(2,"div",1)(3,"div",2)(4,"input",3),o.NdJ("keydown.enter",function(){return u.searchText()})("ngModelChange",function(I){return u.textSearch=I}),o.qZA(),o.TgZ(5,"button",4),o.NdJ("click",function(){return u.searchText()}),o._UZ(6,"i",5),o.qZA(),o.TgZ(7,"div",6),o.Hsn(8),o.qZA()(),o.TgZ(9,"div"),o.Hsn(10,1),o.qZA()(),o.TgZ(11,"div"),o.YNc(12,t,2,0,"ng-container",0),o.YNc(13,T,5,1,"div",7),o.YNc(14,y,3,0,"div",0),o.YNc(15,O,2,0,"div",8),o.YNc(16,E,1,6,"mat-paginator",9),o.qZA()()),2&l&&(o.Akn(u.styles),o.xp6(1),o.Q6J("ngIf",u.title),o.xp6(3),o.Q6J("placeholder",u.placeholder)("ngModel",u.textSearch),o.xp6(8),o.Q6J("ngIf",!u.isLoading&&u.paginator.length>0),o.xp6(1),o.Q6J("ngIf",u.isLoading),o.xp6(1),o.Q6J("ngIf",u.paginator.length<=0&&!u.isLoading&&void 0!==u.isLoading),o.xp6(1),o.Q6J("ngIf",void 0===u.isLoading),o.xp6(1),o.Q6J("ngIf",u.paginator.length>0))},dependencies:[d.O5,v.Fj,v.JJ,v.On,h.NW,f.pW],styles:[".input-default[_ngcontent-%COMP%]{outline:none;width:100%;font-weight:700;font-size:1.3em;padding:10px 35px 10px 40px;border:none;border-radius:6px;font-weight:400;height:45px}.btn-default[_ngcontent-%COMP%]{border:none;width:35px;height:35px;border-radius:50%;background:transparent;font-size:18px;color:gray;position:absolute;left:9px}.content-btns[_ngcontent-%COMP%]{position:absolute;right:14px}.grid-default[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);grid-gap:20px;margin-top:20px}.loading-container[_ngcontent-%COMP%]{width:100%;position:absolute;top:0;height:100%;margin:10px}.loading-container[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{background:#dadada3d;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);height:100%;width:100%}"]}),p})()},70407:(S,C,i)=>{i.r(C),i.d(C,{PromotionsModule:()=>ut});var o=i(69808),h=i(59516),x=i(4721),d=i(93075),v=i(57062),f=i(41571),g=i(29724),t=i(5e3),T=i(8735),y=i(25245),O=i(26688),P=i(67322),E=i(47423),M=i(77531),b=i(74107),U=i(90508),p=i(9224),Z=i(2638),l=i(14623),u=i(29055),_=i(86856),I=i(78536);const L=["search"];function z(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"button",36),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit,s=t.oxw();return t.KtG(s.addProductSelected(r.key))}),t.TgZ(1,"mat-icon"),t._uU(2,"add"),t.qZA()()}}function Q(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"button",37),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit,s=t.oxw();return t.KtG(s.removeProductSelected(r.key))}),t.TgZ(1,"mat-icon"),t._uU(2,"remove"),t.qZA()()}}function j(n,c){if(1&n&&(t.TgZ(0,"div",29)(1,"div",30)(2,"div",31),t._uU(3),t.qZA(),t._UZ(4,"img",32),t.TgZ(5,"div",33)(6,"mat-chip-list")(7,"mat-chip"),t._uU(8),t.qZA(),t.TgZ(9,"mat-chip"),t._uU(10),t.qZA(),t.TgZ(11,"mat-chip"),t._uU(12),t.ALo(13,"date"),t.qZA()()(),t.TgZ(14,"div"),t.YNc(15,z,3,0,"button",34),t.YNc(16,Q,3,0,"ng-template",null,35,t.W1O),t.qZA()()()),2&n){const e=c.$implicit,a=t.MAs(17),r=t.oxw();t.xp6(3),t.Oqu(e.value.name),t.xp6(1),t.Q6J("src",e.value.image||"assets/img/img_default_null.jpg",t.LSH),t.xp6(4),t.hij("Codigo: ",e.value.code,""),t.xp6(2),t.hij("Codigo Alt: ",e.value.code_alt,""),t.xp6(2),t.hij("Creado: ",t.lcZ(13,7,e.value.created_at),""),t.xp6(3),t.Q6J("ngIf",!r.productsSelected.has(e.key))("ngIfElse",a)}}function B(n,c){if(1&n&&(t.TgZ(0,"mat-option",38),t._uU(1),t.ALo(2,"translatefz"),t.qZA()),2&n){const e=c.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(t.xi3(2,2,e,"promotions"))}}function Y(n,c){if(1&n&&(t.TgZ(0,"mat-option",38),t._uU(1),t.ALo(2,"translatefz"),t.qZA()),2&n){const e=c.$implicit;t.Q6J("value",e),t.xp6(1),t.hij("",t.lcZ(2,2,e)," ")}}function R(n,c){if(1&n&&(t.ynx(0),t.TgZ(1,"mat-form-field",39)(2,"mat-label"),t._uU(3,"Fecha de inicio"),t.qZA(),t._UZ(4,"input",40),t.TgZ(5,"mat-error"),t._uU(6,"Fecha de inicio con errores, seleccione correctamente la fecha"),t.qZA(),t.TgZ(7,"mat-hint"),t._uU(8,"Seleccione primero esta fecha para poder ingresar la fecha final"),t.qZA(),t._UZ(9,"mat-datepicker-toggle",41)(10,"mat-datepicker",42,43),t.qZA(),t.TgZ(12,"mat-form-field",39)(13,"mat-label"),t._uU(14,"Fecha final"),t.qZA(),t._UZ(15,"input",44),t.TgZ(16,"mat-error"),t._uU(17,"Fecha final con errores, seleccione correctamente la fecha"),t.qZA(),t._UZ(18,"mat-datepicker-toggle",41)(19,"mat-datepicker",42,45),t.qZA(),t.BQk()),2&n){const e=t.MAs(11),a=t.MAs(20),r=t.oxw();let s,m;t.xp6(4),t.Q6J("matDatepicker",e),t.xp6(5),t.Q6J("for",e),t.xp6(6),t.Q6J("min",null==(s=r.form.get("date_range_start"))?null:s.value)("disabled",null==(m=r.form.get("date_range_start"))?null:m.invalid)("matDatepicker",a),t.xp6(3),t.Q6J("for",a)}}function H(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"mat-list",39)(1,"mat-list-item"),t._UZ(2,"img",46),t.TgZ(3,"div",47),t._uU(4),t.qZA(),t.TgZ(5,"div",47),t._uU(6),t.qZA(),t.TgZ(7,"button",48),t.NdJ("click",function(){const s=t.CHM(e).$implicit,m=t.oxw();return t.KtG(m.removeProductSelected(s.key))}),t.TgZ(8,"mat-icon"),t._uU(9,"delete"),t.qZA()(),t.TgZ(10,"div",47)(11,"mat-form-field"),t._UZ(12,"input",49),t.qZA(),t.TgZ(13,"mat-form-field"),t._UZ(14,"input",50),t.qZA()()()()}if(2&n){const e=c.$implicit;t.xp6(2),t.Q6J("src",e.value.image||"assets/img/img_default_null.jpg",t.LSH),t.xp6(2),t.hij("",e.value.name," "),t.xp6(2),t.hij(" ",e.value.code," "),t.xp6(6),t.Q6J("formControlName","quantity_"+e.key),t.xp6(2),t.Q6J("formControlName","listPrice_"+e.key)}}let k=(()=>{class n extends v.${constructor(e,a,r){super(e,a,r),this.activated_route=e,this.service=a,this.router=r,this.urlSearchProducts="catalogs/promotions/search-products",this.durationType=[],this.statuses=[],this.key_param="promotion_id",this.form=new d.cw({title:new d.NI(null),price:new d.NI(null,[d.kI.required]),duration_type:new d.NI(null,[d.kI.required]),status:new d.NI(null),note:new d.NI(null),products:new d.NI([],[d.kI.required,d.kI.minLength(1)]),date_range_start:new d.NI(null),date_range_end:new d.NI(null)}),this.products=new Map,this.hasDate=!1,this.products_edit=new Map,this.productsSelected=new Map,this.title="Promoci\xf3n",this.urlSave="catalogs/promotions"}ngOnInit(){this.init()}setData(e){var a,r,s,m,F,J,D;"edit"===this.status&&(this.data=e.promotion,this.selectionDuration({value:this.data.duration_type}),null===(a=this.form.get("title"))||void 0===a||a.setValue(this.data.title),null===(r=this.form.get("price"))||void 0===r||r.setValue(this.data.price_formated),null===(s=this.form.get("duration_type"))||void 0===s||s.setValue(this.data.duration_type),null===(m=this.form.get("status"))||void 0===m||m.setValue(this.data.status),null===(F=this.form.get("note"))||void 0===F||F.setValue(this.data.note),null===(J=this.form.get("date_range_start"))||void 0===J||J.setValue(this.data.start_date),null===(D=this.form.get("date_range_end"))||void 0===D||D.setValue(this.data.end_date),this.products_edit=new Map(this.data.products.map(A=>[A.id,A])),this.data.products.forEach(A=>{var N,q;this.addProductSelected(A.id),null===(N=this.form.get("quantity_"+A.id))||void 0===N||N.setValue(A.pivot.quantity),null===(q=this.form.get("listPrice_"+A.id))||void 0===q||q.setValue(A.pivot.price)})),this.durationType=e.price_durations,this.statuses=e.statuses}getData(e){this.products=e}getProducts(e){this.products=new Map(e.data.map(a=>[a.id,a]))}addProductSelected(e){var a,r;this.generateFormProducts(e);let s=null===(a=this.form.get("products"))||void 0===a?void 0:a.value;s||(s=[]),s.push(e),null===(r=this.form.get("products"))||void 0===r||r.setValue(s),this.productsSelected.set(e,this.products.get(e)||this.products_edit.get(e))}generateFormProducts(e){const a="quantity_"+e,r=new d.NI(null,[d.kI.required]),s="listPrice_"+e,m=new d.NI(null,[d.kI.required]);this.form.addControl(a,r),this.form.addControl(s,m)}removeProductSelected(e){var a,r;let s=null===(a=this.form.get("products"))||void 0===a?void 0:a.value;s?(s.splice(s.indexOf(e),1),null===(r=this.form.get("products"))||void 0===r||r.setValue(s),this.removeFormProducts(e),this.productsSelected.delete(e)):s=[]}removeFormProducts(e){this.form.removeControl("quantity_"+e),this.form.removeControl("listPrice_"+e)}getDataForSendServer(){if(this.form.valid){const e=this.form.value;if(this.hasDate){if(e.date_range_start=f.F.convertDateForLaravelOfDataPicker(e.date_range_start),e.date_range_end=f.F.convertDateForLaravelOfDataPicker(e.date_range_end),console.log(e),e.date_range_start<e.date_range_end)return g.J.swalFire({title:"La fecha de inicio debe ser mayor o igual a la fecha de fin"}),!1}else e.date_range_start=null,e.date_range_end=null;return e}return g.J.swalToast("Por favor, verifique los campos en rojo","error"),!1}go(){this.router.navigate(["/catalogo/promotions"])}selectionDuration(e){var a,r,s,m;console.log(e),this.hasDate="date_range"===e.value,this.hasDate?(null===(a=this.form.get("date_range_start"))||void 0===a||a.setValidators(d.kI.required),null===(r=this.form.get("date_range_end"))||void 0===r||r.setValidators(d.kI.required)):(null===(s=this.form.get("date_range_start"))||void 0===s||s.setValidators(null),null===(m=this.form.get("date_range_end"))||void 0===m||m.setValidators(null))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(h.gz),t.Y36(T.X),t.Y36(h.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["ng-component"]],viewQuery:function(e,a){if(1&e&&t.Gf(L,5),2&e){let r;t.iGM(r=t.CRH())&&(a.search=r.first)}},features:[t.qOj],decls:51,vars:14,consts:[[1,"example-container","bg-transparent"],["fixedInViewport","true","position","end","mode","over",1,"example-sidenav","col-md-6","position-fixed"],["drawer",""],["mat-mini-fab","","color","warn",1,"btn-close-sidebar",3,"click"],["placeholder","Buscador de productos",3,"url","data"],["search",""],["data",""],[1,"card-columns","p-2"],["class","card border-0 rounded-fz shadow",4,"ngFor","ngForOf"],[1,"example-sidenav-content"],[1,"font-facebook","font-5xl","my-2","list-group-item-accent-warning"],[1,"shadow","card-body","rounded-fz"],[1,"row","m-0",3,"formGroup"],[1,"col-md-12","col-12"],["matInput","","placeholder","Titulo","formControlName","title"],[1,"col-md-4","col-12"],["matInput","","placeholder","Precio","formControlName","price"],["placeholder","Seleccione un tipo de duraci\xf3n","formControlName","duration_type",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["placeholder","Seleccione un estado","formControlName","status"],[4,"ngIf"],["matInput","","placeholder","Nota","formControlName","note"],[1,"col-12","mb-4","card-body","shadow","rounded-fz"],[1,"font-facebook","font-2xl","my-2"],[1,"text-danger",3,"hidden"],[1,"row"],["class","col-md-6 col-12",4,"ngFor","ngForOf"],["type","button","mat-flat-button","","color","accent",3,"click"],["type","submit","mat-flat-button","","color","primary",3,"disabled","click"],[1,"card","border-0","rounded-fz","shadow"],[1,"card-body"],[1,"text-primary"],["alt","imagen producto",1,"w-100",3,"src"],[1,"my-2"],["mat-mini-fab","","color","accent",3,"click",4,"ngIf","ngIfElse"],["templateBtnRemove",""],["mat-mini-fab","","color","accent",3,"click"],["mat-mini-fab","","color","warn",3,"click"],[3,"value"],[1,"col-md-6","col-12"],["disabled","","matInput","","formControlName","date_range_start",3,"matDatepicker"],["matSuffix","",3,"for"],["disabled","false"],["picker1",""],["disabled","","matInput","","formControlName","date_range_end",3,"min","disabled","matDatepicker"],["picker2",""],["mat-list-icon","","alt","imagen producto",1,"img-product",3,"src"],["mat-line",""],["mat-icon-button","","color","warn",3,"click"],["matInput","","placeholder","Cantidad",3,"formControlName"],["matInput","","placeholder","Se factura en",3,"formControlName"]],template:function(e,a){if(1&e){const r=t.EpF();t.TgZ(0,"div")(1,"mat-drawer-container",0)(2,"mat-drawer",1,2)(4,"button",3),t.NdJ("click",function(){t.CHM(r);const m=t.MAs(3);return t.KtG(m.toggle())}),t.TgZ(5,"mat-icon"),t._uU(6,"close"),t.qZA()(),t.TgZ(7,"app-search",4,5),t.NdJ("data",function(m){return a.getProducts(m)}),t.ynx(9,6),t.TgZ(10,"div",7),t.YNc(11,j,18,9,"div",8),t.ALo(12,"keyvalue"),t.qZA(),t.BQk(),t.qZA()(),t.TgZ(13,"div",9)(14,"h2",10),t._uU(15),t.qZA(),t.TgZ(16,"mat-card",11)(17,"form",12)(18,"mat-form-field",13),t._UZ(19,"input",14),t.TgZ(20,"mat-error"),t._uU(21,"El Titulo es requerido"),t.qZA()(),t.TgZ(22,"mat-form-field",15),t._UZ(23,"input",16),t.TgZ(24,"mat-error"),t._uU(25,"El precio es requerido"),t.qZA()(),t.TgZ(26,"mat-form-field",15)(27,"mat-select",17),t.NdJ("selectionChange",function(m){return a.selectionDuration(m)}),t.YNc(28,B,3,5,"mat-option",18),t.qZA(),t.TgZ(29,"mat-error"),t._uU(30,"El tipo de duraci\xf3n es requerido"),t.qZA()(),t.TgZ(31,"mat-form-field",15)(32,"mat-select",19),t.YNc(33,Y,3,4,"mat-option",18),t.qZA(),t.TgZ(34,"mat-error"),t._uU(35,"El estado es requerido"),t.qZA()(),t.YNc(36,R,21,6,"ng-container",20),t.TgZ(37,"mat-form-field",13),t._UZ(38,"textarea",21),t.qZA(),t.TgZ(39,"div",22)(40,"h3",23),t._uU(41,"Productos"),t.qZA(),t.TgZ(42,"small",24),t._uU(43,"Seleccione por lo menos 1 productos"),t.qZA(),t.TgZ(44,"div",25),t.YNc(45,H,15,5,"mat-list",26),t.ALo(46,"keyvalue"),t.qZA(),t.TgZ(47,"button",27),t.NdJ("click",function(){t.CHM(r);const m=t.MAs(3);return t.KtG(m.toggle())}),t._uU(48," Abrir buscador de producto "),t.qZA()(),t.TgZ(49,"button",28),t.NdJ("click",function(){return a.saveInServer()}),t._uU(50," Guardar promoci\xf3n "),t.qZA()()()()()()}if(2&e){let r;t.xp6(7),t.Q6J("url",a.urlSearchProducts),t.xp6(4),t.Q6J("ngForOf",t.lcZ(12,10,a.products)),t.xp6(4),t.Oqu(a.title),t.xp6(2),t.Q6J("formGroup",a.form),t.xp6(11),t.Q6J("ngForOf",a.durationType),t.xp6(5),t.Q6J("ngForOf",a.statuses),t.xp6(3),t.Q6J("ngIf",a.hasDate),t.xp6(6),t.Q6J("hidden",(null==(r=a.form.get("products"))?null:r.value.length)>0),t.xp6(3),t.Q6J("ngForOf",t.lcZ(46,12,a.productsSelected)),t.xp6(4),t.Q6J("disabled",a.isLoading)}},dependencies:[o.sg,o.O5,y.Hw,O.qn,O.HS,P.TO,P.KE,P.bx,P.hX,P.R9,E.lW,M.Nt,b.gD,U.ey,p.a8,Z.jA,Z.kh,l.i$,l.Tg,U.X2,l.Nh,u.g,d._Y,d.Fj,d.JJ,d.JL,d.sg,d.u,_.Mq,_.hl,_.nW,o.uU,o.Nd,I.P],styles:[".mat-chip[_ngcontent-%COMP%]{height:auto}.btn-close-sidebar[_ngcontent-%COMP%]{position:absolute;top:5px;right:101%;z-index:1}.example-sidenav[_ngcontent-%COMP%]{overflow:initial}.img-product[_ngcontent-%COMP%]{width:50px!important;height:50px!important;object-fit:contain}"]}),n})();var K=i(43720),$=i(98078),w=i(67399);function V(n,c){if(1&n&&(t.TgZ(0,"div",4),t._uU(1),t.qZA()),2&n){const e=c.$implicit;t.xp6(1),t.Oqu(e)}}function W(n,c){if(1&n&&(t.TgZ(0,"mat-list-option")(1,"mat-icon",2),t._uU(2),t.qZA(),t.YNc(3,V,2,1,"div",3),t.qZA()),2&n){const e=c.$implicit;t.xp6(2),t.Oqu(e.icon),t.xp6(1),t.Q6J("ngForOf",e.lines)}}let G=(()=>{class n{constructor(e){this.data=e}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(w.OG))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-sheet-fz"]],decls:2,vars:2,consts:[[3,"multiple"],[4,"ngFor","ngForOf"],["mat-list-icon",""],["mat-line","",4,"ngFor","ngForOf"],["mat-line",""]],template:function(e,a){1&e&&(t.TgZ(0,"mat-selection-list",0),t.YNc(1,W,4,2,"mat-list-option",1),t.qZA()),2&e&&(t.Q6J("multiple",!1),t.xp6(1),t.Q6J("ngForOf",a.data))},dependencies:[o.sg,U.X2,l.Nh,l.Ub,l.vS,y.Hw]}),n})();var X=i(95625),tt=i(57261),et=i(28300);function ot(n,c){if(1&n&&(t.TgZ(0,"mat-chip",13),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.hij("",null==e.value?null:e.value.note," ")}}function nt(n,c){if(1&n&&(t.ynx(0),t.TgZ(1,"mat-chip")(2,"span",8),t._uU(3,"Fecha de inicio:\xa0"),t.qZA(),t._uU(4),t.ALo(5,"date"),t.qZA(),t.TgZ(6,"mat-chip")(7,"span",8),t._uU(8,"Fecha final:\xa0"),t.qZA(),t._uU(9),t.ALo(10,"date"),t.qZA(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(4),t.hij(" ",t.lcZ(5,2,e.value.start_date),""),t.xp6(5),t.hij(" ",t.lcZ(10,4,e.value.end_date),"")}}const at=function(n){return["./",n,"edit"]};function it(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"mat-card",6)(1,"mat-card-header")(2,"mat-card-title"),t._uU(3),t.qZA(),t.TgZ(4,"mat-card-subtitle"),t._uU(5),t.ALo(6,"date"),t.ALo(7,"date"),t.qZA()(),t.TgZ(8,"mat-card-content")(9,"mat-chip-list"),t.YNc(10,ot,2,1,"mat-chip",7),t.TgZ(11,"mat-chip")(12,"span",8),t._uU(13," Estado:\xa0"),t.qZA(),t._uU(14),t.ALo(15,"translatefz"),t.qZA(),t.TgZ(16,"mat-chip")(17,"span",8),t._uU(18,"Por:\xa0"),t.qZA(),t._uU(19),t.ALo(20,"translatefz"),t.qZA(),t.TgZ(21,"mat-chip")(22,"span",8),t._uU(23,"Precio:\xa0"),t.qZA(),t._uU(24),t.qZA(),t.YNc(25,nt,11,6,"ng-container",9),t.TgZ(26,"mat-chip")(27,"span",8),t._uU(28,"Numero de productos:\xa0"),t.qZA(),t._uU(29),t.qZA(),t.TgZ(30,"mat-chip",10),t.NdJ("click",function(){const s=t.CHM(e).$implicit,m=t.oxw();return t.KtG(m.openSheetViewProducts(s.key))}),t._uU(31,"Ver productos \xa0"),t.TgZ(32,"mat-icon"),t._uU(33,"visibility"),t.qZA()()()(),t.TgZ(34,"mat-card-actions")(35,"button",11)(36,"mat-icon"),t._uU(37,"edit"),t.qZA()(),t.TgZ(38,"button",12),t.NdJ("click",function(){const s=t.CHM(e).$implicit,m=t.oxw();return t.KtG(m.deleteData(s.key))}),t.TgZ(39,"mat-icon"),t._uU(40,"delete"),t.qZA()()()()}if(2&n){const e=c.$implicit;t.Q6J("@fade",void 0),t.xp6(3),t.Oqu(e.value.title),t.xp6(2),t.AsE("",t.lcZ(6,11,e.value.start_date)," A ",t.lcZ(7,13,e.value.end_date)," "),t.xp6(5),t.Q6J("ngIf",null==e.value?null:e.value.note),t.xp6(4),t.hij(" ",t.lcZ(15,15,e.value.status),""),t.xp6(5),t.hij(" ",t.xi3(20,17,e.value.duration_type,"promotions"),""),t.xp6(5),t.hij(" ",e.value.price.full_price_formated,""),t.xp6(1),t.Q6J("ngIf","date_range"===e.value.duration_type),t.xp6(4),t.hij(" ",e.value.products.length,""),t.xp6(6),t.Q6J("routerLink",t.VKq(20,at,e.key))}}const rt=function(){return["./create"]},st=[{path:"",component:(()=>{class n extends $.r{constructor(e,a,r){super(),this.methodsHttp=e,this.snackBar=a,this.sheet=r,this.key_paginator="promotions",this.url="catalogs/promotions"}ngOnInit(){}getData(e){console.log(e),this.data=new Map(e[this.key_paginator].data.map(a=>[a[this.key],a]))}openSheetViewProducts(e){this.sheet.open(G,{data:this.data.get(e).products.map(a=>({id:a.id,icon:"sell",lines:[`${a.name} - (${a.code})`,`Precio: ${a.pivot.price}`,`Cantidad: ${a.pivot.quantity}`]}))})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(X.s),t.Y36(tt.ux),t.Y36(w.ch))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-promotions-index"]],features:[t.qOj],decls:11,vars:7,consts:[[1,"list-group-item-accent-warning","font-facebook","font-5xl","pl-2","my-2"],[3,"key_paginator","url$","data"],["menuBar",""],["routerLinkActive","router-link-active","selected","true","color","accent",1,"ml-1",3,"routerLink"],["data",""],["class","card border-0 shadow rounded-fz",4,"ngFor","ngForOf"],[1,"card","border-0","shadow","rounded-fz"],["disableRipple","true","selectable","false","selected","false","style","height: auto;",4,"ngIf"],[1,"text-primary"],[4,"ngIf"],[3,"click"],["mat-mini-fab","",3,"routerLink"],["mat-mini-fab","","color","warn",3,"click"],["disableRipple","true","selectable","false","selected","false",2,"height","auto"]],template:function(e,a){1&e&&(t.TgZ(0,"div")(1,"h2",0),t._uU(2,"Promociones"),t.qZA(),t.TgZ(3,"app-search-template",1),t.NdJ("data",function(s){return a.getData(s)}),t.ynx(4,2),t.TgZ(5,"mat-chip",3)(6,"mat-icon"),t._uU(7,"add"),t.qZA()(),t.BQk(),t.ynx(8,4),t.YNc(9,it,41,22,"mat-card",5),t.ALo(10,"keyvalue"),t.BQk(),t.qZA()()),2&e&&(t.xp6(3),t.Q6J("key_paginator","promotions")("url$",a.url),t.xp6(2),t.Q6J("routerLink",t.DdM(6,rt)),t.xp6(4),t.Q6J("ngForOf",t.lcZ(10,4,a.data)))},dependencies:[o.sg,o.O5,h.rH,h.Od,et._,y.Hw,O.qn,O.HS,E.lW,p.a8,p.dk,p.dn,p.n5,p.$j,p.hq,o.uU,o.Nd,I.P],styles:[".mat-list-item[_ngcontent-%COMP%]{height:40px!important}.note[_ngcontent-%COMP%]{height:auto!important;margin-bottom:8px}"],data:{animation:K.A}}),n})(),data:{name:"promotions",permissions:{only:["super-admin","catalogs.promotions.index"]}},canActivate:[x.DD]},{path:"create",component:k,data:{name:"promotions.create",permissions:{only:["super-admin","catalogs.promotions.create"]}},canActivate:[x.DD]},{path:":promotion_id/edit",component:k,data:{name:"promotions.edit",isEdit:!0,permissions:{only:["super-admin","catalogs.promotions.edit"]}},canActivate:[x.DD]}];let dt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[h.Bz.forChild(st),h.Bz]}),n})();var lt=i(75401),ct=i(82085),pt=i(81974);let mt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[o.ez,l.ie,y.Ps]}),n})(),ut=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[o.ez,dt,lt.r,y.Ps,O.Hi,P.lN,E.ot,M.c,b.LD,p.QW,Z.SJ,l.ie,ct.v,d.UX,pt.F,_.FA,mt]}),n})()},78536:(S,C,i)=>{i.d(C,{P:()=>x});var o=i(95518),h=i(5e3);let x=(()=>{class d{transform(f,...g){return g[0]=g[0]||"default",(0,o.d)(f,g[0])||f}}return d.\u0275fac=function(f){return new(f||d)},d.\u0275pipe=h.Yjl({name:"translatefz",type:d,pure:!0}),d})()}}]);