"use strict";(self.webpackChunkng=self.webpackChunkng||[]).push([[1595],{51595:(Pt,w,s)=>{s.r(w),s.d(w,{AppointmentsModule:()=>St});var d=s(69808),u=s(59516),T=s(4721),L=s(43720),W=s(65291),M=s(72349),g=s(29724),c=s(93075),I=s(28300),t=s(5e3),q=s(8735),m=s(67322),A=s(77531),h=s(90508),f=s(47423),v=s(25245),p=s(48966),_=s(9224),J=s(32368),k=s(91079);const O=function(o){return{"background-image":o}};function Y(o,r){if(1&o&&t._UZ(0,"div",21),2&o){const e=t.oxw().$implicit;t.Q6J("ngStyle",t.VKq(1,O,"url("+(null==e.value||null==e.value.photo?null:e.value.photo.real_permalink)+")"))}}function H(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",18)(1,"mat-card")(2,"button",19),t.NdJ("click",function(){const i=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.addUserSelect(i.key))}),t.TgZ(3,"mat-icon"),t._uU(4,"add"),t.qZA()(),t.TgZ(5,"mat-card-header"),t.YNc(6,Y,1,3,"div",20),t.TgZ(7,"mat-card-title"),t._uU(8),t.qZA(),t.TgZ(9,"mat-card-subtitle"),t._uU(10),t.qZA()()()()}if(2&o){const e=r.$implicit,n=t.oxw(2);t.xp6(2),t.Q6J("disabled",n.dataSelectMap.has(e.key)),t.xp6(4),t.Q6J("ngIf",null==e.value||null==e.value.photo?null:e.value.photo.real_permalink),t.xp6(2),t.AsE("",e.value.first_name," ",e.value.last_name,""),t.xp6(2),t.Oqu(e.value.email)}}function z(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"app-search-template",15),t.NdJ("data",function(a){t.CHM(e);const i=t.oxw();return t.KtG(i.getDataPaginate(a))}),t.ynx(1,16),t.YNc(2,H,11,5,"div",17),t.ALo(3,"keyvalue"),t.BQk(),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("url$",e.url),t.xp6(2),t.Q6J("ngForOf",t.lcZ(3,2,e.dataMap))}}function $(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"mat-option",27),t.NdJ("click",function(){const i=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.captureUserFinalist(i.id))}),t.TgZ(1,"div"),t._uU(2),t.qZA()()}if(2&o){const e=r.$implicit;t.Q6J("value",e.title),t.xp6(2),t.Oqu(e.title)}}function D(o,r){1&o&&(t.TgZ(0,"mat-option"),t._uU(1,"Cargando ..."),t.qZA())}function G(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",7)(1,"div",22)(2,"input",23),t.NdJ("keyup.enter",function(a){t.CHM(e);const i=t.oxw();return t.KtG(i.searchWorks(a))}),t.qZA()(),t.TgZ(3,"mat-autocomplete",null,24),t.YNc(5,$,3,2,"mat-option",25),t.YNc(6,D,2,0,"mat-option",26),t.qZA()()}if(2&o){const e=t.MAs(4),n=t.oxw();t.xp6(2),t.Q6J("matAutocomplete",e),t.xp6(3),t.Q6J("ngForOf",n.works),t.xp6(1),t.Q6J("ngIf",n.isloadUser)}}function K(o,r){if(1&o&&t._UZ(0,"div",21),2&o){const e=t.oxw().$implicit;t.Q6J("ngStyle",t.VKq(1,O,"url("+(null==e.value||null==e.value.photo?null:e.value.photo.real_permalink)+")"))}}function j(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"mat-card",28)(1,"button",29),t.NdJ("click",function(){const i=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.removeUser(i.key))}),t.TgZ(2,"mat-icon"),t._uU(3,"remove"),t.qZA()(),t.TgZ(4,"mat-card-header"),t.YNc(5,K,1,3,"div",20),t.TgZ(6,"mat-card-title"),t._uU(7),t.qZA(),t.TgZ(8,"mat-card-subtitle"),t._uU(9),t.qZA()()()}if(2&o){const e=r.$implicit;t.xp6(5),t.Q6J("ngIf",null==e.value||null==e.value.photo?null:e.value.photo.real_permalink),t.xp6(2),t.AsE("",e.value.first_name," ",e.value.last_name,""),t.xp6(2),t.Oqu(e.value.email)}}function R(o,r){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"mat-form-field",30)(2,"mat-label"),t._uU(3),t.qZA(),t._UZ(4,"input",31),t.TgZ(5,"button",32),t.NdJ("click",function(){const i=t.CHM(e).index,l=t.oxw();return t.KtG(l.removeFormEmail(i))}),t.TgZ(6,"mat-icon"),t._uU(7,"delete"),t.qZA()()(),t.BQk()}if(2&o){const e=r.$implicit,n=r.index;t.xp6(3),t.hij("Correo electronico ",n,""),t.xp6(1),t.Q6J("formControl",e)}}let B=(()=>{class o{constructor(e){this.s_standard=e,this.url="rrhh/users",this.placeholder="Buscador usuario",this.dataMap=new Map,this.dataSelectMap=new Map,this.form=new c.cw({full_work:new c.NI(!1,[c.kI.required]),emails:new c.Oe([])}),this.search_works="",this.works=[],this.isloadUser=!1,this.isload=!1}ngOnInit(){}get emailsForm(){return this.form.controls.emails}getDataPaginate(e){this.dataMap=new Map(e.map(n=>[n.id,n]))}addUserSelect(e){const n=Object.assign({},this.dataMap.get(e));this.dataSelectMap.set(e,n)}removeUser(e){this.dataSelectMap.delete(e)}searchWorks(e){const n=e.target.value;this.isloadUser=!0,this.s_standard.index("rrhh/works",n).subscribe(i=>{this.isloadUser=!1,this.works=i.data.data},i=>{console.log(i),this.isloadUser=!1})}captureUserFinalist(e){this.s_standard.index(`rrhh/work/${e}/requests`).subscribe(n=>{this.dataSelectMap=new Map(n.data.map(a=>[a.user.id,a.user]))})}saveInServer(){this.isload=!0;const n=this.getDataForSend();n&&this.s_standard.store("rrhh/cv/users/emails",n).subscribe(()=>{g.J.swalFire({title:"Enviado",text:"Se ha enviado el correo",icon:"success"})})}getDataForSend(){if(this.form.invalid)return this.form.markAllAsTouched(),!1;const e=this.form.value,n=[];return this.dataSelectMap.forEach((a,i)=>{n.push(i)}),0!==n.length&&Object.assign(Object.assign({},e),{users:n})}addEmail(e=null){const n=new c.NI(e,[c.kI.required,c.kI.email]);this.emailsForm.push(n)}removeFormEmail(e){this.emailsForm.removeAt(e)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(q.X))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-modal-send-cv"]],viewQuery:function(e,n){if(1&e&&t.Gf(I._,5),2&e){let a;t.iGM(a=t.CRH())&&(n.appFoo=a.first)}},decls:25,vars:8,consts:[["mat-dialog-content",""],[3,"url$","data",4,"ngIf","ngIfElse"],["TEMPLATE_FULL_WORK",""],[1,"font-facebook","font-2xl","mb-1"],[1,"card-columns"],["class","card position-relative",4,"ngFor","ngForOf"],[3,"formGroup"],[1,"col-12"],["formArrayName","emails"],[4,"ngFor","ngForOf"],["type","button","mat-raised-button","",1,"my-1",3,"click"],["formControlName","full_work",1,"w-100"],["mat-dialog-actions",""],["color","primary","mat-raised-button","",3,"disabled","click"],["mat-raised-button","","mat-dialog-close","","color","warn","cdkFocusInitial",""],[3,"url$","data"],["data",""],["class","card",4,"ngFor","ngForOf"],[1,"card"],["mat-mini-fab","",1,"add-btn",3,"disabled","click"],["class","img-avatar","mat-card-avatar","",3,"ngStyle",4,"ngIf"],["mat-card-avatar","",1,"img-avatar",3,"ngStyle"],[1,"w-100","position-relative","center"],["placeholder","Buscador el empleo","type","search","matInput","",1,"font-2xl","px-3","py-1","shadow","w-100",2,"border-radius","10px",3,"matAutocomplete","keyup.enter"],["auto","matAutocomplete"],[3,"value","click",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"value","click"],[1,"card","position-relative"],["color","warn","mat-mini-fab","",1,"add-btn",3,"click"],["appearance","fill",1,"w-100"],["matInput","","placeholder","Ingrese un ofrecimiento","required","",3,"formControl"],["type","button","mat-icon-button","","matSuffix","",3,"click"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,z,4,4,"app-search-template",1),t.TgZ(2,"div"),t.YNc(3,G,7,3,"ng-template",null,2,t.W1O),t._UZ(5,"hr"),t.TgZ(6,"div",3),t._uU(7,"CV de usuarios a enviar"),t.qZA(),t.TgZ(8,"div",4),t.YNc(9,j,10,4,"mat-card",5),t.ALo(10,"keyvalue"),t.qZA()(),t.TgZ(11,"div")(12,"form",6)(13,"div",7),t.ynx(14,8),t.YNc(15,R,8,2,"ng-container",9),t.TgZ(16,"button",10),t.NdJ("click",function(){return n.addEmail()}),t._uU(17,"Agregar email destinatario"),t.qZA(),t.BQk(),t.qZA(),t.TgZ(18,"mat-slide-toggle",11),t._uU(19,"Enviar a todos los finalistas de un empleo especificico"),t.qZA()()()(),t.TgZ(20,"div",12)(21,"button",13),t.NdJ("click",function(){return n.saveInServer()}),t._uU(22,"Enviar emails"),t.qZA(),t.TgZ(23,"button",14),t._uU(24,"Cerrar"),t.qZA()()),2&e){const a=t.MAs(4);t.xp6(1),t.Q6J("ngIf",!n.form.get("full_work").value)("ngIfElse",a),t.xp6(8),t.Q6J("ngForOf",t.lcZ(10,6,n.dataSelectMap)),t.xp6(3),t.Q6J("formGroup",n.form),t.xp6(3),t.Q6J("ngForOf",n.emailsForm.controls),t.xp6(6),t.Q6J("disabled",n.dataSelectMap.size<1||n.emailsForm.length<1||n.form.invalid)}},dependencies:[d.sg,d.O5,d.PC,c._Y,c.Fj,c.JJ,c.JL,c.Q7,c.oH,c.sg,c.u,c.CE,m.KE,m.hX,m.R9,A.Nt,h.ey,f.lW,v.Hw,p.ZT,p.xY,p.H8,_.a8,_.dk,_.n5,_.$j,_.kc,J.Rr,I._,k.XC,k.ZL,d.Nd],styles:[".img-avatar[_ngcontent-%COMP%]{background-size:contain}.add-btn[_ngcontent-%COMP%]{position:absolute;top:0px;right:-10px;opacity:.5}"]}),o})();var X=s(57261),F=s(69287);let V=(()=>{class o{constructor(e,n){this.zoom=e,this.snackBar=n}ngOnInit(){}urlJoinCopy(){this.snackBar.open("URL copiada al portapapeles","Cerrar",{duration:3e3})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(p.WI),t.Y36(X.ux))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-modal-zoom"]],decls:33,vars:6,consts:[[1,"m-0","font-facebook","font-2xl"],[1,"font-weight-bold"],["mat-dialog-content",""],[1,"row","m-0","lead"],[1,"col-md-6","col-12","border-right"],[1,"font-2xl","my-2"],["target","__blank",1,"font-weight-bold","btn-warning","btn","btn-sm",3,"href"],[1,"col-md-6","col-12"],[1,"font-weight-bold",2,"cursor","pointer",3,"cdkCopyToClipboard","click"],["mat-dialog-actions",""],["mat-raised-button","","mat-dialog-close","","color","warn","cdkFocusInitial",""]],template:function(e,n){1&e&&(t.TgZ(0,"h3",0)(1,"span",1),t._uU(2),t.qZA()(),t.TgZ(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5),t._uU(7,"Datos para el anfitri\xf3n"),t.qZA(),t._uU(8," Ir a cita: "),t.TgZ(9,"a",6),t._uU(10,"Preciona aqui para ir a la cita"),t.qZA(),t._UZ(11,"br"),t._uU(12," Tiempo de inicio: "),t.TgZ(13,"span",1),t._uU(14),t.qZA(),t._UZ(15,"br"),t.qZA(),t.TgZ(16,"div",7)(17,"div",5),t._uU(18,"Datos para invitado"),t.qZA(),t.TgZ(19,"div"),t._uU(20," Contrase\xf1a: "),t.TgZ(21,"span",1),t._uU(22),t.qZA(),t._UZ(23,"br"),t._uU(24," Join Url: "),t.TgZ(25,"span",8),t.NdJ("click",function(){return n.urlJoinCopy()}),t._uU(26),t.TgZ(27,"small"),t._uU(28,"(click para copiar)"),t.qZA()(),t._UZ(29,"br"),t.qZA()()()(),t.TgZ(30,"div",9)(31,"button",10),t._uU(32,"Cerrar"),t.qZA()()),2&e&&(t.xp6(2),t.Oqu(n.zoom.topic),t.xp6(7),t.s9C("href",n.zoom.start_url,t.LSH),t.xp6(5),t.Oqu(n.zoom.start_time),t.xp6(8),t.Oqu(n.zoom.password),t.xp6(3),t.Q6J("cdkCopyToClipboard",n.zoom.join_url),t.xp6(1),t.hij("",n.zoom.join_url," "))},dependencies:[f.lW,p.ZT,p.xY,p.H8,F.i3],styles:["p[_ngcontent-%COMP%]{overflow-wrap:anywhere;line-height:1.5}"]}),o})();var x=s(41571),b=s(26688),S=s(84909),N=s(86087),U=s(74107),E=s(71158),Z=s(92181),Q=s(87238);const tt=function(){return{"border-radius":"20px",height:"200px"}},et=function(){return{"border-radius":"5px",height:"35px",width:"150px","margin-right":"5px"}},nt=function(){return{"border-radius":"5px",height:"25px",width:"150px","margin-right":"5px"}};function ot(o,r){1&o&&(t.TgZ(0,"div",22),t._UZ(1,"ngx-skeleton-loader",23),t.TgZ(2,"div",24),t._UZ(3,"ngx-skeleton-loader",25),t.qZA(),t._UZ(4,"ngx-skeleton-loader",23)(5,"ngx-skeleton-loader",23),t.qZA()),2&o&&(t.Q6J("@fade",void 0),t.xp6(1),t.Q6J("theme",t.DdM(4,tt)),t.xp6(3),t.Q6J("theme",t.DdM(5,et)),t.xp6(1),t.Q6J("theme",t.DdM(6,nt)))}const at=function(){return[1,2,3]};function it(o,r){1&o&&(t.TgZ(0,"div",20),t.YNc(1,ot,6,7,"div",21),t.qZA()),2&o&&(t.xp6(1),t.Q6J("ngForOf",t.DdM(1,at)))}function rt(o,r){1&o&&t._UZ(0,"div",49)}function st(o,r){if(1&o&&(t.ynx(0),t._uU(1),t.BQk()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.AsE(" ",e.assigned_person.first_name,"",e.assigned_person.last_name," ")}}function ct(o,r){1&o&&t._uU(0," Sin persona asignada ")}function lt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"mat-chip",43),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit,i=t.oxw(2);return t.KtG(i.modalZoom(a.id))}),t.TgZ(1,"mat-icon"),t._uU(2,"videocam"),t.qZA(),t._uU(3," Zoom "),t.qZA()}}function dt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"mat-chip",50),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit,i=t.oxw(2);return t.KtG(i.doFinalist(a.id))}),t.TgZ(1,"mat-icon"),t._uU(2,"file_download_done"),t.qZA()()}}function pt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"mat-chip",51),t.NdJ("click",function(){t.CHM(e);const a=t.oxw().$implicit,i=t.oxw(2);return t.KtG(i.doHired(a.id))}),t.TgZ(1,"mat-icon"),t._uU(2,"military_tech"),t.qZA()()}}function ut(o,r){1&o&&(t.TgZ(0,"mat-chip",52),t._uU(1," Esta persona ya fue contratada "),t.qZA())}function mt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"mat-card",27),t.YNc(1,rt,1,0,"div",28),t.TgZ(2,"div")(3,"div",29)(4,"div",30),t._uU(5),t.qZA(),t._UZ(6,"hr",31),t.TgZ(7,"div",32)(8,"div",33)(9,"p",34),t._uU(10," Solicitante: "),t.TgZ(11,"span"),t._uU(12),t._UZ(13,"br"),t.qZA(),t._uU(14," Tipo : "),t.TgZ(15,"span"),t._uU(16),t._UZ(17,"br"),t.qZA(),t._uU(18," Estado : "),t.TgZ(19,"span",35),t._uU(20),t._UZ(21,"br"),t.qZA(),t._uU(22," Fecha:"),t.TgZ(23,"span"),t._uU(24),t.ALo(25,"date"),t.qZA(),t._UZ(26,"br"),t._uU(27," Hora: "),t.TgZ(28,"span"),t._uU(29),t.ALo(30,"date"),t.qZA(),t._UZ(31,"br"),t._uU(32," Persona asignada: "),t.TgZ(33,"span"),t.YNc(34,st,2,2,"ng-container",36),t.YNc(35,ct,1,0,"ng-template",null,37,t.W1O),t.qZA()()()(),t.TgZ(37,"div",38),t._UZ(38,"img",39),t.qZA(),t.TgZ(39,"div",31),t._uU(40," Comentario: "),t.TgZ(41,"span",40),t._uU(42),t.qZA()(),t.TgZ(43,"div",31)(44,"mat-chip-list",1)(45,"mat-chip",41),t.NdJ("click",function(){const i=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.goWork(i.request.work.id))}),t.TgZ(46,"mat-icon"),t._uU(47,"description"),t.qZA(),t._uU(48," Empleo "),t.qZA(),t.YNc(49,lt,4,0,"mat-chip",42),t.TgZ(50,"mat-chip",43),t.NdJ("click",function(){const i=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.openCv(i.id))}),t.TgZ(51,"mat-icon"),t._uU(52,"assignment_ind"),t.qZA(),t._uU(53," HV "),t.qZA(),t.TgZ(54,"mat-chip",44),t.NdJ("click",function(){const i=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.deleteAppointment(i.id))}),t.TgZ(55,"mat-icon"),t._uU(56,"delete"),t.qZA()(),t.TgZ(57,"mat-chip",45),t.NdJ("click",function(){const i=t.CHM(e).$implicit,l=t.oxw(2);return t.KtG(l.gotEditAppointment(i.id))}),t.TgZ(58,"mat-icon"),t._uU(59,"edit"),t.qZA()(),t.YNc(60,dt,3,0,"mat-chip",46),t.YNc(61,pt,3,0,"mat-chip",47),t.YNc(62,ut,2,0,"mat-chip",48),t.qZA()()()()()}if(2&o){const e=r.$implicit,n=t.MAs(36);t.Q6J("@fade",void 0),t.xp6(1),t.Q6J("ngIf",null==e?null:e.isLoading),t.xp6(4),t.Oqu(e.request.work.title),t.xp6(7),t.AsE("",e.request.user.first_name," ",e.request.user.last_name," "),t.xp6(4),t.hij("",e.type," "),t.xp6(4),t.hij("",e.request.current_status.name," "),t.xp6(4),t.hij(" ",t.xi3(25,17,e.date,"dd/MM/yyyy")," "),t.xp6(5),t.Oqu(t.xi3(30,20,e.date,"hh:mm")),t.xp6(5),t.Q6J("ngIf",e.assigned_person)("ngIfElse",n),t.xp6(4),t.Q6J("src",e.request.user.photo.real_permalink,t.LSH),t.xp6(4),t.Oqu(e.comment?e.comment:"Sin comentario"),t.xp6(7),t.Q6J("ngIf","video_conference"===e.type),t.xp6(11),t.Q6J("ngIf","request_in_process"===e.request.current_status.type_action),t.xp6(1),t.Q6J("ngIf","request_finalist"===e.request.current_status.type_action),t.xp6(1),t.Q6J("ngIf","request_hired"===e.request.current_status.type_action)}}function _t(o,r){if(1&o&&(t.TgZ(0,"div",20),t.YNc(1,mt,63,23,"mat-card",26),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.products)}}function gt(o,r){1&o&&(t.ynx(0),t.TgZ(1,"div",53)(2,"div",54),t._UZ(3,"img",55),t.qZA(),t.TgZ(4,"div",56),t._uU(5," Ups! Sin resultados en tu b\xfasqueda "),t.qZA()(),t.BQk())}const ht=function(){return[10,20,30]};function ft(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"mat-paginator",57),t.NdJ("page",function(a){t.CHM(e);const i=t.oxw();return t.KtG(i.changePaginator(a))}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("hidden",e.isLoading)("pageSizeOptions",t.DdM(5,ht))("pageSize",e.paginator.per_page)("length",e.paginator.total)("pageIndex",e.paginator.current_page-1)}}function vt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",58)(1,"div",59)(2,"button",60),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.isOpenCv=!1)}),t.TgZ(3,"mat-icon"),t._uU(4,"close"),t.qZA()(),t.TgZ(5,"div",61)(6,"div",62)(7,"div",63)(8,"div",64),t._UZ(9,"ngx-doc-viewer",65),t.qZA()()()()()()}if(2&o){const e=t.oxw();t.Q6J("ngClass",e.isOpenCv?"open-cv":"close-cv"),t.xp6(9),t.Q6J("url",e.cv)}}const xt=function(o){return{status:o}},Zt=function(){return["/recursos-humanos/requests"]};let Ct=(()=>{class o extends W.j{constructor(e,n,a,i){super(),this.s_shared=e,this.dialog=n,this.router=a,this.s_serviceStandard=i,this.url="rrhh/appointments",this.isOpenCv=!1,this.cv="",this.status="normal",this.statusAppointment="available",this.userSelectedToEmailCv=[]}ngOnInit(){}deleteAppointment(e){const n=this.products.find(a=>a.id===e);n&&g.J.swalConfirmation("Eliminacion de Cita","\xbfEst\xe1 seguro de eliminar esta Cita?","question","Si, eliminar","No, cancelar").then(a=>{a.isConfirmed&&(n.isLoading=!0,this.s_serviceStandard.destory(`rrhh/requests/${n.request.id}/appointments/${n.id}`).subscribe(i=>{if(n.isLoading=!1,i&&i.hasOwnProperty("success")&&i.success){const l=this.products.findIndex(y=>y.id===e);this.products.splice(l,1)}},()=>{n.isLoading=!1}))})}modalZoom(e){var n;const a=null===(n=this.products.find(i=>i.id===e))||void 0===n?void 0:n.zoom_meet;a&&this.dialog.open(V,{data:a})}goRequest(e){this.router.navigate(["/recursos-humanos/request/"],{queryParams:{search:e}})}goWork(e){this.router.navigate(["/recursos-humanos/works/"],{queryParams:{search:e}})}openCv(e){var n;this.isOpenCv=!0;const a=null===(n=this.products.find(i=>i.id===e))||void 0===n?void 0:n.request.user.resume.attachment.real_permalink;a&&(this.cv=a)}gotEditAppointment(e){const n=this.products.find(a=>a.id===e);n&&(this.s_shared.requestWork=n.request||null,this.s_shared.appointmentWork=n,this.router.navigate([`/recursos-humanos/appointments/request/${n.request.id}/edit/${e}`]))}doFinalist(e){const n=this.products.find(a=>a.id===e);n&&this.s_serviceStandard.store(`rrhh/requests/${n.request_id}/statuses`,{status:"request_finalist"}).subscribe(i=>{n.isLoading=!1,i&&i.hasOwnProperty("success")&&i.success&&(n.request.current_status.type_action="request_finalist")},()=>{n.isLoading=!1})}doHired(e){const n=this.products.find(a=>a.id===e);if(n){if("request_hired"===n.request.current_status.type_action)return void g.J.swalConfirmation("Precauci\xf3n","Este usuario ya esta contratado .\n Deseas cambiar el estado a finalista?","warning","Si, deseo cambiar a finalista").then(a=>{a.isConfirmed&&(n.isLoading=!0,this.s_serviceStandard.store(`rrhh/requests/${n.request_id}/statuses`,{status:"request_finalist"}).subscribe(l=>{n.isLoading=!1,l&&l.hasOwnProperty("success")&&l.success&&(n.request.current_status.type_action="request_finalist")},()=>{n.isLoading=!1}))});g.J.swalConfirmation("Precauci\xf3n","\xbfEst\xe1 seguro de contratar a este trabajador?","question","Si, contratar","No, cancelar").then(a=>{a.isConfirmed&&this.s_serviceStandard.store(`rrhh/requests/${n.request_id}/statuses`,{status:"request_hired"}).subscribe(l=>{l.hasOwnProperty("success")&&l.success&&(n.request.current_status.type_action="request_hired")})})}}changedStatus(){this.dialog.open(B,{disableClose:!0})}applyFilter(){this.headerComponent.filter_data={status:this.statusAppointment},this.headerComponent.searchBar()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(x.F),t.Y36(p.uw),t.Y36(u.F0),t.Y36(q.X))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-index"]],viewQuery:function(e,n){if(1&e&&t.Gf(M.H,5),2&e){let a;t.iGM(a=t.CRH())&&(n.headerComponent=a.first)}},features:[t.qOj],decls:43,vars:20,consts:[[3,"title","filter_data","placeholder","url","isLoading","products"],[1,"ml-1"],[1,"text-truncate",3,"matMenuTriggerFor"],["type","search",1,"text-black-50"],[3,"overlapTrigger"],["menu","matMenu"],["mat-menu-item","",3,"routerLink"],["mat-menu-item","",3,"click"],["menuState","matMenu"],["mat-menu-item","",3,"disableRipple","click","keydown"],[1,"w-100"],[3,"ngModel","ngModelChange"],["value","all"],["value","available"],["value","expired"],["mat-raised-button","",3,"click"],["class","mt-4 card-columns",4,"ngIf"],[4,"ngIf"],["showFirstLastButtons","",3,"hidden","pageSizeOptions","pageSize","length","pageIndex","page",4,"ngIf"],["class","section-cv",3,"ngClass",4,"ngIf"],[1,"mt-4","card-columns"],["class","card border-0 rounded-fz text-center",4,"ngFor","ngForOf"],[1,"card","border-0","rounded-fz","text-center"],["count","1",3,"theme"],[1,"text-center"],["appearance","circle","count","1"],["class","card border-0 rounded-fz overflow-hidden position-relative",4,"ngFor","ngForOf"],[1,"card","border-0","rounded-fz","overflow-hidden","position-relative"],["class","position-absolute w-100 h-100 opaque-blur",4,"ngIf"],[1,"row","m-0"],[1,"col-12","font-weight-bold","h3"],[1,"col-12"],[1,"col-md-7","col-12"],[1,"header-request"],[1,"font-italic","lead"],[1,"text-success"],[4,"ngIf","ngIfElse"],["notAssignedPerson",""],[1,"col-md-5","col-12","center"],["alt","",1,"rounded-fz","shadow","w-100",3,"src"],[1,"font-weight-bold","d-flex"],[1,"text-truncate",3,"click"],["color","accent","class","text-truncate",3,"click",4,"ngIf"],["color","accent",1,"text-truncate",3,"click"],["selected","","color","warn",1,"text-truncate",3,"click"],["selected","","color","accent",1,"text-truncate",3,"click"],["class","bg-success","matTooltip","Hacer Finalista","color","accent","class","text-truncate",3,"click",4,"ngIf"],["class","bg-success","matTooltip","Contratar a esta persona","color","accent","class","text-truncate",3,"click",4,"ngIf"],["class","bg-success","selected","","color","primary","class","text-truncate",4,"ngIf"],[1,"position-absolute","w-100","h-100","opaque-blur"],["matTooltip","Hacer Finalista","color","accent",1,"text-truncate",3,"click"],["matTooltip","Contratar a esta persona","color","accent",1,"text-truncate",3,"click"],["selected","","color","primary",1,"text-truncate"],[1,"row"],[1,"col-md-6"],["src","/assets/img/respuesta_vacia.svg","alt","","width","100%"],[1,"col-md-6","font-facebook","font-2xl","d-flex","align-items-center"],["showFirstLastButtons","",3,"hidden","pageSizeOptions","pageSize","length","pageIndex","page"],[1,"section-cv",3,"ngClass"],[1,"content-cv"],["mat-mini-fab","",1,"btn-close-cv","bg-dark",3,"click"],[1,"container-cv","shadow","p-3"],[1,"row","h-100"],[1,"col-md-12"],[1,"display-4","h-100"],["viewer","pdf",2,"width","100%","height","100%",3,"url"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div")(1,"app-header-search",0),t.NdJ("isLoading",function(i){return n.isLoading=i})("products",function(i){return n.loadData(i)}),t.TgZ(2,"mat-chip-list",1)(3,"mat-chip",2)(4,"mat-icon",3),t._uU(5,"filter_alt"),t.qZA()()(),t.TgZ(6,"mat-chip-list",1)(7,"mat-chip",2)(8,"mat-icon",3),t._uU(9,"more_vert"),t.qZA()()(),t.TgZ(10,"mat-menu",4,5)(12,"button",6)(13,"mat-icon"),t._uU(14,"add"),t.qZA(),t.TgZ(15,"span"),t._uU(16,"Crear cita"),t.qZA()(),t.TgZ(17,"button",7),t.NdJ("click",function(){return n.changedStatus()}),t.TgZ(18,"mat-icon"),t._uU(19,"email"),t.qZA(),t.TgZ(20,"span"),t._uU(21,"Enviar CV por email"),t.qZA()()(),t.TgZ(22,"mat-menu",4,8)(24,"div",9),t.NdJ("click",function(i){return i.stopPropagation()})("keydown",function(i){return i.stopPropagation()}),t.TgZ(25,"mat-form-field",10)(26,"mat-label"),t._uU(27,"Crear cita"),t.qZA(),t.TgZ(28,"mat-select",11),t.NdJ("ngModelChange",function(i){return n.statusAppointment=i}),t.TgZ(29,"mat-option",12),t._uU(30,"Todos"),t.qZA(),t.TgZ(31,"mat-option",13),t._uU(32,"Disponible"),t.qZA(),t.TgZ(33,"mat-option",14),t._uU(34,"Expirados"),t.qZA()()()(),t.TgZ(35,"div",9),t.NdJ("click",function(i){return i.stopPropagation()})("keydown",function(i){return i.stopPropagation()}),t.TgZ(36,"button",15),t.NdJ("click",function(){return n.applyFilter()}),t._uU(37,"Aplicar filtros"),t.qZA()()()(),t.YNc(38,it,2,2,"div",16),t.YNc(39,_t,2,1,"div",16),t.YNc(40,gt,6,0,"ng-container",17),t.YNc(41,ft,1,6,"mat-paginator",18),t.qZA(),t.YNc(42,vt,10,2,"div",19)),2&e){const a=t.MAs(11),i=t.MAs(23);t.xp6(1),t.Q6J("title","Citas")("filter_data",t.VKq(17,xt,n.statusAppointment))("placeholder","Buscador de citas")("url",n.url),t.xp6(2),t.Q6J("matMenuTriggerFor",i),t.xp6(4),t.Q6J("matMenuTriggerFor",a),t.xp6(3),t.Q6J("overlapTrigger",!1),t.xp6(2),t.Q6J("routerLink",t.DdM(19,Zt)),t.xp6(10),t.Q6J("overlapTrigger",!1),t.xp6(2),t.Q6J("disableRipple",!0),t.xp6(4),t.Q6J("ngModel",n.statusAppointment),t.xp6(7),t.Q6J("disableRipple",!0),t.xp6(3),t.Q6J("ngIf",n.isLoading),t.xp6(1),t.Q6J("ngIf",!n.isLoading),t.xp6(1),t.Q6J("ngIf",!n.isLoading&&(null==n.products?null:n.products.length)<1),t.xp6(1),t.Q6J("ngIf",(null==n.products?null:n.products.length)>0),t.xp6(1),t.Q6J("ngIf",n.isOpenCv)}},dependencies:[d.mk,d.sg,d.O5,u.rH,M.H,b.qn,b.HS,S.xr,N.NW,c.JJ,m.KE,m.hX,U.gD,h.ey,f.lW,v.Hw,E.z,Z.VK,Z.OP,Z.p6,_.a8,Q.gM,c.On,d.uU],styles:[".container-cv[_ngcontent-%COMP%]{position:absolute;top:0;right:0;width:var(--size-cv);background:white;height:100vh}  :root{--size-cv: 70%}.btn-close-cv[_ngcontent-%COMP%]{position:absolute;right:calc(var(--size-cv) + 3px);z-index:1;top:5px}.section-cv[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;z-index:10000;background:white}.content-cv[_ngcontent-%COMP%]{width:100vw;height:100vh;top:0;right:0;position:absolute;background:#ffffff26;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px)}.open-cv[_ngcontent-%COMP%]{transform:translate(0);transition:transform .3s}.close-cv[_ngcontent-%COMP%]{transform:translate(100%);transition:transform .3s}.header-request[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:700}"],data:{animation:L.A}}),o})();var Tt=s(86405);function qt(o,r){1&o&&t._UZ(0,"div",30)}function At(o,r){if(1&o&&(t.TgZ(0,"mat-option",31),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.label," ")}}function kt(o,r){if(1&o&&(t.TgZ(0,"mat-option",31),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.Q6J("value",e.id),t.xp6(1),t.AsE(" ",e.first_name," ",e.last_name," ")}}function bt(o,r){if(1&o&&(t.TgZ(0,"mat-option",31),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.Q6J("value",e.id),t.xp6(1),t.hij(" ",e.name," ")}}const Ut=function(){return["/recursos-humanos/works"]},yt=function(o){return{search:o}};function wt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",1)(1,"h2",2),t._uU(2),t.qZA(),t.TgZ(3,"div")(4,"div")(5,"form",3),t.NdJ("ngSubmit",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.saveInServer())}),t.TgZ(6,"mat-card",4)(7,"div",5)(8,"span"),t._uU(9,"Empleo: "),t.TgZ(10,"strong"),t._uU(11),t.qZA()(),t.TgZ(12,"button",6)(13,"mat-icon"),t._uU(14,"work"),t.qZA()()(),t.TgZ(15,"div",7)(16,"div",8),t.YNc(17,qt,1,0,"div",9),t.TgZ(18,"div",10)(19,"div",11),t._uU(20," Cita "),t.qZA(),t.TgZ(21,"div",12)(22,"mat-form-field",13),t._UZ(23,"input",14),t.qZA()(),t.TgZ(24,"div",12)(25,"mat-form-field",13)(26,"mat-label"),t._uU(27,"Tipo de entrevista"),t.qZA(),t.TgZ(28,"mat-select",15),t.NdJ("selectionChange",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.changeSelectionType())}),t.YNc(29,At,2,2,"mat-option",16),t.qZA()()(),t.TgZ(30,"div",17)(31,"mat-form-field",13)(32,"mat-label"),t._uU(33,"Comentario"),t.qZA(),t._UZ(34,"textarea",18),t.qZA()(),t.TgZ(35,"div",12)(36,"mat-form-field",13)(37,"mat-label"),t._uU(38,"Persona encargada"),t.qZA(),t.TgZ(39,"mat-select",19),t.YNc(40,kt,2,3,"mat-option",16),t.qZA()()(),t.TgZ(41,"div",12)(42,"mat-form-field",13)(43,"mat-label"),t._uU(44,"Ubicacion"),t.qZA(),t.TgZ(45,"mat-select",20),t.YNc(46,bt,2,2,"mat-option",16),t.qZA()()(),t.TgZ(47,"button",21),t._uU(48,"Guardar\xa0"),t.TgZ(49,"mat-icon"),t._uU(50,"save"),t.qZA()()()()(),t.TgZ(51,"div",22)(52,"div",23)(53,"div",24)(54,"div",11),t._uU(55," Solicitante: "),t.TgZ(56,"strong"),t._uU(57),t.qZA()(),t.TgZ(58,"div",25)(59,"p",26),t._uU(60," Fecha: "),t.TgZ(61,"strong"),t._uU(62),t.ALo(63,"date"),t.qZA(),t._UZ(64,"br"),t._uU(65," Email: "),t.TgZ(66,"strong")(67,"a",27),t._uU(68),t.qZA()(),t._UZ(69,"br"),t._uU(70," Fecha de nacimiento: "),t.TgZ(71,"strong"),t._uU(72),t.ALo(73,"date"),t.qZA(),t._UZ(74,"br"),t._uU(75," Cuidad de residencias: "),t.TgZ(76,"strong"),t._uU(77),t.qZA(),t._UZ(78,"br"),t.qZA()(),t.TgZ(79,"div",28),t._UZ(80,"img",29),t.qZA()()()()()()()()()}if(2&o){const e=t.oxw();t.xp6(2),t.Oqu(e.title),t.xp6(3),t.Q6J("formGroup",e.formAppointment),t.xp6(6),t.Oqu(e.requestWork.work.title),t.xp6(1),t.Q6J("routerLink",t.DdM(21,Ut))("queryParams",t.VKq(22,yt,e.requestWork.work.id)),t.xp6(5),t.Q6J("ngIf",e.isLoad),t.xp6(12),t.Q6J("ngForOf",e.TYPES_APPOINTMENTS),t.xp6(11),t.Q6J("ngForOf",e.persons),t.xp6(6),t.Q6J("ngForOf",e.locations),t.xp6(11),t.AsE(" ",null==e.requestWork||null==e.requestWork.user?null:e.requestWork.user.first_name," ",null==e.requestWork||null==e.requestWork.user?null:e.requestWork.user.last_name," "),t.xp6(5),t.hij(" ",t.lcZ(63,17,null==e.requestWork?null:e.requestWork.created_at)," "),t.xp6(5),t.MGl("href","mailto:",null==e.requestWork||null==e.requestWork.user?null:e.requestWork.user.email,"",t.LSH),t.xp6(1),t.Oqu(e.requestWork.user.email),t.xp6(4),t.hij(" ",t.lcZ(73,19,null==e.requestWork||null==e.requestWork.user?null:e.requestWork.user.birthday)," "),t.xp6(5),t.hij(" ",null==e.requestWork||null==e.requestWork.user?null:e.requestWork.user.resident_city," "),t.xp6(3),t.Q6J("src",null==e.requestWork||null==e.requestWork.user||null==e.requestWork.user.photo?null:e.requestWork.user.photo.real_permalink,t.LSH)}}let P=(()=>{class o{constructor(e,n,a,i,l){this.actived_router=e,this.spinner=n,this.s_standart=a,this.router=i,this.s_shared=l,this.isLoad=!1,this.title="Creando Cita",this.state="create",this.persons=[],this.locations=[],this.TYPES_APPOINTMENTS=[{value:"video_conference",label:"Video Conference"},{value:"face_to_face",label:"Presencial"}],this.formAppointment=new c.cw({date:new c.NI(null,[c.kI.required]),type:new c.NI(null,[c.kI.required]),comment:new c.NI(null),request_id:new c.NI(null,[c.kI.required]),novi_sys_person_id:new c.NI(null),novi_sys_location_id:new c.NI(null)})}ngOnInit(){var e;this.requestWork=this.s_shared.requestWork,this.requestWork?(null===(e=this.formAppointment.get("request_id"))||void 0===e||e.setValue(this.requestWork.id),this.spinner.show(),this.actived_router.data.subscribe(n=>{var a;if(this.state=n.isEdit?"edit":"create",n.isEdit){this.title="Editando Cita",this.appointmet=this.s_shared.appointmentWork;const{comment:i,type:l,date:y,novi_sys_location_id:Nt,novi_sys_person_id:Et}=this.appointmet;this.formAppointment.setValue({comment:i,type:l,date:new Date(y).toISOString().substring(0,16),novi_sys_location_id:Nt,novi_sys_person_id:Et,request_id:this.requestWork.id}),this.changeSelectionType(),null===(a=this.formAppointment.get("type"))||void 0===a||a.disable(),this.s_standart.show("rrhh/appointments/edit").subscribe(C=>{this.spinner.hide(),C&&C.hasOwnProperty("success")&&C.success&&this.loadData(C.data)},()=>{this.spinner.hide()})}else this.s_standart.show("rrhh/appointments/create").subscribe(l=>{this.spinner.hide(),l&&l.hasOwnProperty("success")&&l.success&&this.loadData(l.data)},()=>{this.spinner.hide()})})):this.router.navigate(["recursos-humanos/requests"])}loadData(e){this.spinner.hide(),this.persons=e.persons,this.locations=e.locations}changeSelectionType(){var e,n,a;"face_to_face"===(null===(e=this.formAppointment.get("type"))||void 0===e?void 0:e.value)?null===(n=this.formAppointment.get("novi_sys_location_id"))||void 0===n||n.enable():null===(a=this.formAppointment.get("novi_sys_location_id"))||void 0===a||a.disable()}saveInServer(){this.formAppointment.valid?"create"===this.state?this.create():"edit"===this.state&&this.edit():g.J.swalToast("Por favor llene todos los campos en rojo","error")}create(){this.isLoad=!0;const e=this.formAppointment.value,n=`rrhh/requests/${this.requestWork.id}/appointments`;e.date=x.F.convertDateForLaravelOfDataPicker(e.date,"yyyy-MM-dd HH:mm:ss"),this.s_standart.store(n,e).subscribe(a=>{this.isLoad=!1,a&&a.hasOwnProperty("success")&&a.success&&this.router.navigate(["recursos-humanos/appointments"])},()=>{this.isLoad=!1})}edit(){this.isLoad=!0;const e=this.formAppointment.value,n=`rrhh/requests/${this.requestWork.id}/appointments/${this.appointmet.id}`;e.date=x.F.convertDateForLaravelOfDataPicker(e.date,"yyyy-MM-dd HH:mm:ss"),this.s_standart.updatePut(n,e).subscribe(a=>{this.isLoad=!1,a&&a.hasOwnProperty("success")&&a.success&&this.router.navigate(["recursos-humanos/appointments"])},()=>{this.isLoad=!1})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(u.gz),t.Y36(Tt.t2),t.Y36(q.X),t.Y36(u.F0),t.Y36(x.F))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-create-or-edit-appointment"]],decls:1,vars:1,consts:[["class","pb-3",4,"ngIf"],[1,"pb-3"],[1,"font-4xl","mt-3"],[3,"formGroup","ngSubmit"],[1,"row","m-0","content-appointment","p-4"],[1,"justify-content-between","center","col-12","p-2","lead","my-2","font-3xl",2,"border-radius","10px"],["mat-icon-button","","type","button",3,"routerLink","queryParams"],[1,"col-md-7","col-12"],[1,"h-100","p-3","shadow","w-100","rounded-fz","position-relative"],["class","panel-isload rounded-fz",4,"ngIf"],[1,"row","m-0"],[1,"col-12","lead","my-2","border-bottom","font-3xl","pb-2"],[1,"col-md-6","col-12"],[1,"w-100"],["formControlName","date","matInput","","type","datetime-local","placeholder","Fecha"],["formControlName","type",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-12"],["matInput","","placeholder","Ingrese un comentario","formControlName","comment"],["formControlName","novi_sys_person_id"],["formControlName","novi_sys_location_id"],["mat-raised-button","","color","primary","type","submit"],[1,"col-md-5","col-12","shadow","rounded-fz"],[1,"card-body"],[1,"row"],[1,"col-md-7","col-12","center"],[1,"lead","font-italic","p"],[1,"text-muted",3,"href"],[1,"col-md-5","col-12","center"],["alt","user photo",1,"w-100","rounded-circle","shadow",3,"src"],[1,"panel-isload","rounded-fz"],[3,"value"]],template:function(e,n){1&e&&t.YNc(0,wt,81,24,"div",0),2&e&&t.Q6J("ngIf",n.requestWork)},dependencies:[d.sg,d.O5,u.rH,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,m.KE,m.hX,A.Nt,U.gD,h.ey,f.lW,v.Hw,_.a8,d.uU],styles:[".content-appointment[_ngcontent-%COMP%]{display:flex}.panel-isload[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;top:0;left:0;background:#ffffff3b;z-index:99999;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px)}"]}),o})();const Mt=[{path:"",component:(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-rrhh-appointment"]],decls:1,vars:0,template:function(e,n){1&e&&t._UZ(0,"router-outlet")},dependencies:[u.lC],encapsulation:2}),o})(),children:[{path:"",component:Ct,data:{permissions:{only:["super-admin","rrhh-appointments"]}},canActivate:[T.DD]},{path:"request/:request_id/edit/:appointment_id",component:P,data:{isEdit:!0,permissions:{only:["super-admin","rrhh-appointments"]}},canActivate:[T.DD]},{path:"request/:id/create",component:P,data:{isEdit:!1,permissions:{only:["super-admin","rrhh-appointments"]}},canActivate:[T.DD]}]}];let It=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[u.Bz.forChild(Mt),u.Bz]}),o})();var Jt=s(9178),Ot=s(86856),Ft=s(75401);let St=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[d.ez,It,Jt.q,b.Hi,S.hx,N.TU,c.UX,m.lN,A.c,U.LD,f.ot,Ot.FA,h.XK,v.Ps,p.Is,E.c,Z.Tx,_.QW,J.rP,Ft.r,k.Bb,F.Iq,Q.AV,h.Ng,c.u5]}),o})()}}]);